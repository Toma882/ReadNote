{
    "sourceFile": "è½¯ä»¶æ¶æ„è®¾è®¡/æ¶æ„æ¨¡å¼/æ´‹è‘±æ¶æ„æ¨¡å¼.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1767096490022,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1767096490022,
            "name": "Commit-0",
            "content": "# æ´‹è‘±æ¶æ„æ¨¡å¼ï¼ˆOnion Architecture Patternï¼‰\r\n\r\n## ç›®å½•\r\n\r\n- [æ¦‚è¿°](#æ¦‚è¿°)\r\n- [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)\r\n- [æ¶æ„ç»“æ„](#æ¶æ„ç»“æ„)\r\n- [è®¾è®¡è§„åˆ™](#è®¾è®¡è§„åˆ™)\r\n- [ä¼˜ç¼ºç‚¹åˆ†æ](#ä¼˜ç¼ºç‚¹åˆ†æ)\r\n- [å®è·µæŒ‡å—](#å®è·µæŒ‡å—)\r\n- [ä¸å…¶ä»–æ¶æ„æ¨¡å¼çš„å…³ç³»](#ä¸å…¶ä»–æ¶æ„æ¨¡å¼çš„å…³ç³»)\r\n- [åº”ç”¨åœºæ™¯](#åº”ç”¨åœºæ™¯)\r\n- [å®é™…æ¡ˆä¾‹](#å®é™…æ¡ˆä¾‹)\r\n- [è®¾è®¡åŸåˆ™](#è®¾è®¡åŸåˆ™)\r\n- [æ€»ç»“](#æ€»ç»“)\r\n\r\n---\r\n\r\n## æ¦‚è¿°\r\n\r\n**æ´‹è‘±æ¶æ„æ¨¡å¼ï¼ˆOnion Architecture Patternï¼‰**æ˜¯ç”±Jeffrey Palermoæå‡ºçš„ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå®ƒå°†åº”ç”¨ç¨‹åºç»„ç»‡æˆä¸€ç³»åˆ—åŒå¿ƒåœ†å±‚ï¼Œä¾èµ–æ–¹å‘ä»å¤–å‘å†…ï¼Œæ ¸å¿ƒé¢†åŸŸæ¨¡å‹åœ¨ä¸­å¿ƒï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨å±‚ã€‚\r\n\r\n### ä»€ä¹ˆæ˜¯æ´‹è‘±æ¶æ„ï¼Ÿ\r\n\r\næ´‹è‘±æ¶æ„å°†ç³»ç»Ÿç»„ç»‡æˆå¤šä¸ªåŒå¿ƒåœ†å±‚ï¼Œå°±åƒæ´‹è‘±çš„å±‚æ¬¡ç»“æ„ï¼š\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"æ´‹è‘±æ¶æ„åŒå¿ƒåœ†\"\r\n        direction TB\r\n        Domain[é¢†åŸŸæ¨¡å‹å±‚<br/>Domain Model<br/>æœ€å†…å±‚æ ¸å¿ƒ]\r\n        DomainServices[é¢†åŸŸæœåŠ¡å±‚<br/>Domain Services]\r\n        ApplicationServices[åº”ç”¨æœåŠ¡å±‚<br/>Application Services]\r\n        Infrastructure[åŸºç¡€è®¾æ–½å±‚<br/>Infrastructure<br/>æœ€å¤–å±‚]\r\n        \r\n        Infrastructure -.ä¾èµ–.-> ApplicationServices\r\n        ApplicationServices -.ä¾èµ–.-> DomainServices\r\n        DomainServices -.ä¾èµ–.-> Domain\r\n        Domain -.ä¸ä¾èµ–ä»»ä½•å±‚.-> Domain\r\n    end\r\n    \r\n    style Domain fill:#ffebee\r\n    style DomainServices fill:#fff4e1\r\n    style ApplicationServices fill:#e8f5e9\r\n    style Infrastructure fill:#e1f5ff\r\n```\r\n\r\n**æ ¸å¿ƒåŸåˆ™**ï¼š\r\n- **ä¾èµ–æ–¹å‘**ï¼šä¾èµ–åªèƒ½ä»å¤–å‘å†…ï¼Œå†…å±‚ä¸ä¾èµ–å¤–å±‚\r\n- **é¢†åŸŸæ¨¡å‹åœ¨ä¸­å¿ƒ**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘åœ¨æœ€å†…å±‚\r\n- **æ¥å£å®šä¹‰åœ¨å¤–å±‚**ï¼šæ¥å£å®šä¹‰åœ¨åº”ç”¨æœåŠ¡å±‚ï¼Œå®ç°åœ¨åŸºç¡€è®¾æ–½å±‚\r\n- **ä¾èµ–å€’ç½®**ï¼šé€šè¿‡æ¥å£å®ç°ä¾èµ–å€’ç½®\r\n\r\n### ä¸ºä»€ä¹ˆéœ€è¦æ´‹è‘±æ¶æ„ï¼Ÿ\r\n\r\næ´‹è‘±æ¶æ„è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š\r\n- **ä¸šåŠ¡é€»è¾‘éš”ç¦»**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®Œå…¨ç‹¬ç«‹äºåŸºç¡€è®¾æ–½\r\n- **å¯æµ‹è¯•æ€§**ï¼šé¢†åŸŸæ¨¡å‹å¯ä»¥ç‹¬ç«‹æµ‹è¯•ï¼Œæ— éœ€åŸºç¡€è®¾æ–½\r\n- **æŠ€æœ¯æ— å…³æ€§**ï¼šä¸šåŠ¡é€»è¾‘ä¸ä¾èµ–å…·ä½“æŠ€æœ¯å®ç°\r\n- **å¯ç»´æŠ¤æ€§**ï¼šæ¸…æ™°çš„ä¾èµ–æ–¹å‘ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤\r\n- **å¯æ‰©å±•æ€§**ï¼šå¯ä»¥è½»æ¾æ›¿æ¢åŸºç¡€è®¾æ–½ï¼Œä¸å½±å“ä¸šåŠ¡é€»è¾‘\r\n\r\n---\r\n\r\n## æ ¸å¿ƒæ¦‚å¿µ\r\n\r\n### æ ¸å¿ƒæ€æƒ³\r\n\r\næ´‹è‘±æ¶æ„æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯**ä¾èµ–å€’ç½®ï¼ˆDependency Inversionï¼‰**å’Œ**å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰**ï¼š\r\n\r\n```mermaid\r\ngraph LR\r\n    subgraph \"ä¾èµ–å€’ç½®åŸåˆ™\"\r\n        Outer[å¤–å±‚<br/>åŸºç¡€è®¾æ–½]\r\n        Inner[å†…å±‚<br/>é¢†åŸŸæ¨¡å‹]\r\n        \r\n        Outer -.ä¾èµ–æ¥å£.-> Interface[æ¥å£å®šä¹‰]\r\n        Interface -.å®ç°.-> Inner\r\n        Inner -.ä¸ä¾èµ–.-> Outer\r\n    end\r\n    \r\n    style Inner fill:#ffebee\r\n    style Interface fill:#fff4e1\r\n    style Outer fill:#e1f5ff\r\n```\r\n\r\n**å…³é”®åŸåˆ™**ï¼š\r\n1. **ä¾èµ–è§„åˆ™**ï¼šä¾èµ–åªèƒ½ä»å¤–å‘å†…ï¼Œå†…å±‚ä¸ä¾èµ–å¤–å±‚\r\n2. **é¢†åŸŸæ¨¡å‹åœ¨ä¸­å¿ƒ**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘åœ¨æœ€å†…å±‚\r\n3. **æ¥å£å®šä¹‰åœ¨å¤–å±‚**ï¼šæ¥å£å®šä¹‰åœ¨åº”ç”¨æœåŠ¡å±‚\r\n4. **ä¾èµ–å€’ç½®**ï¼šé€šè¿‡æ¥å£å®ç°ä¾èµ–å€’ç½®\r\n\r\n### åŸºæœ¬ç‰¹å¾\r\n\r\n- **åŒå¿ƒåœ†ç»“æ„**ï¼šç³»ç»Ÿç»„ç»‡æˆå¤šä¸ªåŒå¿ƒåœ†å±‚\r\n- **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æ–¹å‘ä»å¤–å‘å†…\r\n- **é¢†åŸŸä¸­å¿ƒ**ï¼šé¢†åŸŸæ¨¡å‹åœ¨ä¸­å¿ƒï¼ŒåŸºç¡€è®¾æ–½åœ¨å¤–å›´\r\n- **æ¥å£æŠ½è±¡**ï¼šé€šè¿‡æ¥å£å®šä¹‰å±‚é—´äº¤äº’\r\n- **å¯æµ‹è¯•æ€§**ï¼šé¢†åŸŸæ¨¡å‹å¯ä»¥ç‹¬ç«‹æµ‹è¯•\r\n\r\n---\r\n\r\n## æ¶æ„ç»“æ„\r\n\r\n### æ´‹è‘±æ¶æ„å®Œæ•´ç»“æ„\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"åŸºç¡€è®¾æ–½å±‚ï¼ˆæœ€å¤–å±‚ï¼‰\"\r\n        Web[Webæ¡†æ¶<br/>ASP.NET/Spring]\r\n        DB[(æ•°æ®åº“<br/>SQL Server/MySQL)]\r\n        File[æ–‡ä»¶ç³»ç»Ÿ<br/>File System]\r\n        Email[é‚®ä»¶æœåŠ¡<br/>SMTP]\r\n        Cache[ç¼“å­˜æœåŠ¡<br/>Redis]\r\n    end\r\n    \r\n    subgraph \"åº”ç”¨æœåŠ¡å±‚\"\r\n        AppService1[åº”ç”¨æœåŠ¡1<br/>OrderService]\r\n        AppService2[åº”ç”¨æœåŠ¡2<br/>PaymentService]\r\n        AppService3[åº”ç”¨æœåŠ¡3[NotificationService]\r\n        Interfaces[æ¥å£å®šä¹‰<br/>IOrderRepository<br/>IPaymentGateway]\r\n    end\r\n    \r\n    subgraph \"é¢†åŸŸæœåŠ¡å±‚\"\r\n        DomainService1[é¢†åŸŸæœåŠ¡1<br/>OrderDomainService]\r\n        DomainService2[é¢†åŸŸæœåŠ¡2<br/>PricingDomainService]\r\n        DomainService3[é¢†åŸŸæœåŠ¡3<br/>ValidationDomainService]\r\n    end\r\n    \r\n    subgraph \"é¢†åŸŸæ¨¡å‹å±‚ï¼ˆæ ¸å¿ƒï¼‰\"\r\n        Entity1[è®¢å•å®ä½“<br/>Order Entity]\r\n        Entity2[ç”¨æˆ·å®ä½“<br/>User Entity]\r\n        Entity3[äº§å“å®ä½“<br/>Product Entity]\r\n        ValueObject1[å€¼å¯¹è±¡<br/>Money ValueObject]\r\n        ValueObject2[å€¼å¯¹è±¡<br/>Address ValueObject]\r\n    end\r\n    \r\n    Web --> AppService1\r\n    DB --> AppService1\r\n    File --> AppService2\r\n    Email --> AppService3\r\n    Cache --> AppService1\r\n    \r\n    AppService1 --> Interfaces\r\n    AppService2 --> Interfaces\r\n    AppService3 --> Interfaces\r\n    \r\n    Interfaces -.å®ç°.-> DB\r\n    Interfaces -.å®ç°.-> Email\r\n    \r\n    AppService1 --> DomainService1\r\n    AppService2 --> DomainService2\r\n    AppService3 --> DomainService3\r\n    \r\n    DomainService1 --> Entity1\r\n    DomainService2 --> Entity2\r\n    DomainService3 --> Entity3\r\n    \r\n    Entity1 --> ValueObject1\r\n    Entity2 --> ValueObject2\r\n    \r\n    style Entity1 fill:#ffebee\r\n    style Entity2 fill:#ffebee\r\n    style Entity3 fill:#ffebee\r\n    style DomainService1 fill:#fff4e1\r\n```\r\n\r\n### å„å±‚èŒè´£è¯¦è§£\r\n\r\n#### 1. é¢†åŸŸæ¨¡å‹å±‚ï¼ˆDomain Modelï¼‰\r\n\r\n**ä½ç½®**ï¼šæœ€å†…å±‚ï¼Œæ ¸å¿ƒä¸šåŠ¡é€»è¾‘\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"é¢†åŸŸæ¨¡å‹å±‚\"\r\n        Entities[å®ä½“<br/>Entities]\r\n        ValueObjects[å€¼å¯¹è±¡<br/>Value Objects]\r\n        DomainEvents[é¢†åŸŸäº‹ä»¶<br/>Domain Events]\r\n        BusinessRules[ä¸šåŠ¡è§„åˆ™<br/>Business Rules]\r\n    end\r\n    \r\n    style Entities fill:#ffebee\r\n```\r\n\r\n**èŒè´£**ï¼š\r\n- åŒ…å«æ ¸å¿ƒä¸šåŠ¡å®ä½“\r\n- å®šä¹‰å€¼å¯¹è±¡\r\n- åŒ…å«ä¸šåŠ¡è§„åˆ™å’ŒéªŒè¯é€»è¾‘\r\n- å®šä¹‰é¢†åŸŸäº‹ä»¶\r\n- ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨å±‚\r\n\r\n**ç‰¹ç‚¹**ï¼š\r\n- æœ€ç¨³å®šçš„ä¸€å±‚\r\n- å˜åŒ–é¢‘ç‡æœ€ä½\r\n- åŒ…å«æ ¸å¿ƒä¸šåŠ¡æ¦‚å¿µ\r\n- çº¯ä¸šåŠ¡é€»è¾‘ï¼Œæ— æŠ€æœ¯ç»†èŠ‚\r\n\r\n#### 2. é¢†åŸŸæœåŠ¡å±‚ï¼ˆDomain Servicesï¼‰\r\n\r\n**ä½ç½®**ï¼šç¬¬äºŒå±‚ï¼Œè·¨å®ä½“çš„ä¸šåŠ¡é€»è¾‘\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"é¢†åŸŸæœåŠ¡å±‚\"\r\n        DomainServices[é¢†åŸŸæœåŠ¡<br/>Domain Services]\r\n        CrossEntity[è·¨å®ä½“é€»è¾‘<br/>Cross-Entity Logic]\r\n        ComplexRules[å¤æ‚ä¸šåŠ¡è§„åˆ™<br/>Complex Business Rules]\r\n    end\r\n    \r\n    style DomainServices fill:#fff4e1\r\n```\r\n\r\n**èŒè´£**ï¼š\r\n- åŒ…å«è·¨å®ä½“çš„ä¸šåŠ¡é€»è¾‘\r\n- å®ç°å¤æ‚çš„ä¸šåŠ¡è§„åˆ™\r\n- åè°ƒå¤šä¸ªå®ä½“å®Œæˆä¸šåŠ¡ç›®æ ‡\r\n- ä¾èµ–é¢†åŸŸæ¨¡å‹å±‚\r\n\r\n**ç‰¹ç‚¹**ï¼š\r\n- ä¾èµ–é¢†åŸŸæ¨¡å‹å±‚\r\n- ä¸ä¾èµ–åŸºç¡€è®¾æ–½\r\n- åŒ…å«é¢†åŸŸç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘\r\n- æ— çŠ¶æ€æœåŠ¡\r\n\r\n#### 3. åº”ç”¨æœåŠ¡å±‚ï¼ˆApplication Servicesï¼‰\r\n\r\n**ä½ç½®**ï¼šç¬¬ä¸‰å±‚ï¼Œåº”ç”¨åè°ƒé€»è¾‘\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"åº”ç”¨æœåŠ¡å±‚\"\r\n        AppServices[åº”ç”¨æœåŠ¡<br/>Application Services]\r\n        Interfaces[æ¥å£å®šä¹‰<br/>Interfaces]\r\n        Orchestration[ç¼–æ’é€»è¾‘<br/>Orchestration]\r\n        DTOs[æ•°æ®ä¼ è¾“å¯¹è±¡<br/>DTOs]\r\n    end\r\n    \r\n    style AppServices fill:#e8f5e9\r\n```\r\n\r\n**èŒè´£**ï¼š\r\n- åè°ƒé¢†åŸŸæœåŠ¡å’Œé¢†åŸŸæ¨¡å‹\r\n- å®šä¹‰æ¥å£ï¼ˆä»“å‚¨æ¥å£ã€æœåŠ¡æ¥å£ï¼‰\r\n- å¤„ç†åº”ç”¨çº§äº‹åŠ¡\r\n- è½¬æ¢DTOå’Œé¢†åŸŸå¯¹è±¡\r\n- ç¼–æ’ä¸šåŠ¡æµç¨‹\r\n\r\n**ç»„ä»¶ç±»å‹**ï¼š\r\n- **åº”ç”¨æœåŠ¡**ï¼šåè°ƒé¢†åŸŸå¯¹è±¡å®Œæˆç”¨ä¾‹\r\n- **æ¥å£å®šä¹‰**ï¼šå®šä¹‰ä»“å‚¨ã€ç½‘å…³ç­‰æ¥å£\r\n- **DTO**ï¼šæ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œç”¨äºå±‚é—´é€šä¿¡\r\n\r\n#### 4. åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructureï¼‰\r\n\r\n**ä½ç½®**ï¼šæœ€å¤–å±‚ï¼ŒæŠ€æœ¯å®ç°\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"åŸºç¡€è®¾æ–½å±‚\"\r\n        Repositories[ä»“å‚¨å®ç°<br/>Repository Implementations]\r\n        Gateways[ç½‘å…³å®ç°<br/>Gateway Implementations]\r\n        Frameworks[æ¡†æ¶é›†æˆ<br/>Framework Integration]\r\n        ExternalServices[å¤–éƒ¨æœåŠ¡<br/>External Services]\r\n    end\r\n    \r\n    style Repositories fill:#e1f5ff\r\n```\r\n\r\n**èŒè´£**ï¼š\r\n- å®ç°åº”ç”¨æœåŠ¡å±‚å®šä¹‰çš„æ¥å£\r\n- æä¾›æŠ€æœ¯å®ç°ï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œï¼‰\r\n- é›†æˆå¤–éƒ¨æ¡†æ¶å’ŒæœåŠ¡\r\n- å¤„ç†æŠ€æœ¯ç»†èŠ‚\r\n\r\n**ç»„ä»¶ç±»å‹**ï¼š\r\n- **ä»“å‚¨å®ç°**ï¼šå®ç°æ•°æ®è®¿é—®æ¥å£\r\n- **ç½‘å…³å®ç°**ï¼šå®ç°å¤–éƒ¨æœåŠ¡æ¥å£\r\n- **æ¡†æ¶é›†æˆ**ï¼šé›†æˆWebæ¡†æ¶ã€ORMç­‰\r\n- **å¤–éƒ¨æœåŠ¡**ï¼šé‚®ä»¶ã€æ”¯ä»˜ã€é€šçŸ¥ç­‰æœåŠ¡\r\n\r\n---\r\n\r\n## è®¾è®¡è§„åˆ™\r\n\r\n### ä¾èµ–è§„åˆ™ï¼ˆDependency Ruleï¼‰\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"ä¾èµ–æ–¹å‘è§„åˆ™\"\r\n        Infrastructure[åŸºç¡€è®¾æ–½å±‚<br/>Infrastructure]\r\n        Application[åº”ç”¨æœåŠ¡å±‚<br/>Application Services]\r\n        DomainServices[é¢†åŸŸæœåŠ¡å±‚<br/>Domain Services]\r\n        Domain[é¢†åŸŸæ¨¡å‹å±‚<br/>Domain Model]\r\n        \r\n        Infrastructure -.ä¾èµ–.-> Application\r\n        Application -.ä¾èµ–.-> DomainServices\r\n        DomainServices -.ä¾èµ–.-> Domain\r\n        Domain -.ä¸ä¾èµ–ä»»ä½•å±‚.-> Domain\r\n    end\r\n    \r\n    style Domain fill:#ffebee\r\n    style DomainServices fill:#fff4e1\r\n    style Application fill:#e8f5e9\r\n    style Infrastructure fill:#e1f5ff\r\n```\r\n\r\n**è§„åˆ™è¯´æ˜**ï¼š\r\n- âœ… **å…è®¸**ï¼šå¤–å±‚ä¾èµ–å†…å±‚\r\n- âŒ **ç¦æ­¢**ï¼šå†…å±‚ä¾èµ–å¤–å±‚\r\n- âœ… **å…è®¸**ï¼šé€šè¿‡æ¥å£å®šä¹‰ä¾èµ–\r\n- âŒ **ç¦æ­¢**ï¼šç›´æ¥ä¾èµ–å…·ä½“å®ç°\r\n\r\n### æ¥å£å®šä¹‰è§„åˆ™\r\n\r\n```mermaid\r\ngraph LR\r\n    subgraph \"æ¥å£å®šä¹‰ä½ç½®\"\r\n        AppLayer[åº”ç”¨æœåŠ¡å±‚<br/>å®šä¹‰æ¥å£]\r\n        InfraLayer[åŸºç¡€è®¾æ–½å±‚<br/>å®ç°æ¥å£]\r\n        \r\n        AppLayer -.å®šä¹‰.-> Interface[IOrderRepository]\r\n        InfraLayer -.å®ç°.-> Interface\r\n    end\r\n    \r\n    style AppLayer fill:#e8f5e9\r\n    style Interface fill:#fff4e1\r\n    style InfraLayer fill:#e1f5ff\r\n```\r\n\r\n**è§„åˆ™è¯´æ˜**ï¼š\r\n- âœ… **æ¥å£å®šä¹‰**ï¼šåœ¨åº”ç”¨æœåŠ¡å±‚å®šä¹‰æ¥å£\r\n- âœ… **æ¥å£å®ç°**ï¼šåœ¨åŸºç¡€è®¾æ–½å±‚å®ç°æ¥å£\r\n- âœ… **ä¾èµ–å€’ç½®**ï¼šé¢†åŸŸå±‚ä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å®ç°\r\n\r\n---\r\n\r\n## ä¼˜ç¼ºç‚¹åˆ†æ\r\n\r\n### ä¼˜ç‚¹\r\n\r\n```mermaid\r\nmindmap\r\n  root((æ´‹è‘±æ¶æ„ä¼˜ç‚¹))\r\n    ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹\r\n      é¢†åŸŸæ¨¡å‹ç‹¬ç«‹\r\n      ä¸ä¾èµ–åŸºç¡€è®¾æ–½\r\n      å¯ç‹¬ç«‹æµ‹è¯•\r\n    å¯æµ‹è¯•æ€§\r\n      é¢†åŸŸæ¨¡å‹å¯ç‹¬ç«‹æµ‹è¯•\r\n      æ— éœ€æ•°æ®åº“å³å¯æµ‹è¯•\r\n      æµ‹è¯•è¦†ç›–ç‡é«˜\r\n    æŠ€æœ¯æ— å…³æ€§\r\n      å¯æ›¿æ¢æ•°æ®åº“\r\n      å¯æ›¿æ¢æ¡†æ¶\r\n      å¯æ›¿æ¢å¤–éƒ¨æœåŠ¡\r\n    å¯ç»´æŠ¤æ€§\r\n      ä¾èµ–æ–¹å‘æ¸…æ™°\r\n      èŒè´£åˆ†ç¦»æ˜ç¡®\r\n      æ˜“äºç†è§£\r\n```\r\n\r\n**è¯¦ç»†è¯´æ˜**ï¼š\r\n- âœ… **ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹**ï¼šé¢†åŸŸæ¨¡å‹å®Œå…¨ç‹¬ç«‹äºåŸºç¡€è®¾æ–½\r\n- âœ… **é«˜åº¦å¯æµ‹è¯•**ï¼šé¢†åŸŸæ¨¡å‹å¯ä»¥ç‹¬ç«‹æµ‹è¯•ï¼Œæ— éœ€åŸºç¡€è®¾æ–½\r\n- âœ… **æŠ€æœ¯æ— å…³æ€§**ï¼šå¯ä»¥è½»æ¾æ›¿æ¢ä»»ä½•æŠ€æœ¯å®ç°\r\n- âœ… **ä¾èµ–æ¸…æ™°**ï¼šä¾èµ–æ–¹å‘æ˜ç¡®ï¼Œæ˜“äºç†è§£\r\n- âœ… **æ¥å£æŠ½è±¡**ï¼šé€šè¿‡æ¥å£å®ç°ä¾èµ–å€’ç½®\r\n\r\n### ç¼ºç‚¹\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"æ´‹è‘±æ¶æ„ç¼ºç‚¹\"\r\n        Complexity[å¤æ‚åº¦é«˜<br/>éœ€è¦ç†è§£å¤šå±‚ç»“æ„]\r\n        Learning[å­¦ä¹ æ›²çº¿é™¡å³­<br/>éœ€è¦ç†è§£ä¾èµ–å€’ç½®]\r\n        Overhead[å¼€å‘å¼€é”€å¤§<br/>éœ€è¦å®šä¹‰æ¥å£]\r\n        Abstraction[æŠ½è±¡å±‚æ¬¡å¤š<br/>å¯èƒ½è¿‡åº¦æŠ½è±¡]\r\n    end\r\n    \r\n    style Complexity fill:#ffcccb\r\n    style Learning fill:#ffcccb\r\n```\r\n\r\n**è¯¦ç»†è¯´æ˜**ï¼š\r\n- âŒ **å¤æ‚åº¦é«˜**ï¼šéœ€è¦ç†è§£å¤šå±‚ç»“æ„å’Œä¾èµ–è§„åˆ™\r\n- âŒ **å­¦ä¹ æ›²çº¿é™¡å³­**ï¼šéœ€è¦ç†è§£ä¾èµ–å€’ç½®å’Œæ¥å£æŠ½è±¡\r\n- âŒ **å¼€å‘å¼€é”€å¤§**ï¼šéœ€è¦å®šä¹‰æ¥å£å’Œå®ç°\r\n- âŒ **å¯èƒ½è¿‡åº¦è®¾è®¡**ï¼šç®€å•é¡¹ç›®å¯èƒ½ä¸éœ€è¦è¿™ä¹ˆå¤æ‚çš„æ¶æ„\r\n- âŒ **æŠ½è±¡å±‚æ¬¡å¤š**ï¼šå¤šå±‚æŠ½è±¡å¯èƒ½å½±å“æ€§èƒ½\r\n\r\n---\r\n\r\n## å®è·µæŒ‡å—\r\n\r\n### å®æ–½æ­¥éª¤\r\n\r\n```mermaid\r\ngraph TD\r\n    Start[å¼€å§‹è®¾è®¡] --> Step1[1. è¯†åˆ«é¢†åŸŸæ¨¡å‹<br/>å®šä¹‰æ ¸å¿ƒä¸šåŠ¡å®ä½“]\r\n    Step1 --> Step2[2. å®šä¹‰é¢†åŸŸæœåŠ¡<br/>è¯†åˆ«è·¨å®ä½“ä¸šåŠ¡é€»è¾‘]\r\n    Step2 --> Step3[3. è®¾è®¡åº”ç”¨æœåŠ¡<br/>å®šä¹‰ç”¨ä¾‹å’Œæ¥å£]\r\n    Step3 --> Step4[4. å®ç°åŸºç¡€è®¾æ–½<br/>å®ç°æ¥å£å’ŒæŠ€æœ¯ç»†èŠ‚]\r\n    Step4 --> End[å®Œæˆ]\r\n    \r\n    style Step1 fill:#ffebee\r\n    style Step2 fill:#fff4e1\r\n    style Step3 fill:#e8f5e9\r\n```\r\n\r\n### åˆ†å±‚å®æ–½ç­–ç•¥\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"å®æ–½ç­–ç•¥\"\r\n        Strategy1[ä»å†…åˆ°å¤–<br/>å…ˆå®ç°é¢†åŸŸæ¨¡å‹]\r\n        Strategy2[ç„¶åé¢†åŸŸæœåŠ¡<br/>å®ç°è·¨å®ä½“é€»è¾‘]\r\n        Strategy3[å†åº”ç”¨æœåŠ¡<br/>å®šä¹‰æ¥å£å’Œç”¨ä¾‹]\r\n        Strategy4[æœ€ååŸºç¡€è®¾æ–½<br/>å®ç°æ¥å£å’ŒæŠ€æœ¯]\r\n    end\r\n    \r\n    Strategy1 --> Strategy2\r\n    Strategy2 --> Strategy3\r\n    Strategy3 --> Strategy4\r\n    \r\n    style Strategy1 fill:#ffebee\r\n    style Strategy2 fill:#fff4e1\r\n```\r\n\r\n**å®æ–½å»ºè®®**ï¼š\r\n1. **ä»æ ¸å¿ƒå¼€å§‹**ï¼šå…ˆå®ç°é¢†åŸŸæ¨¡å‹å±‚ï¼Œå®šä¹‰æ ¸å¿ƒä¸šåŠ¡æ¦‚å¿µ\r\n2. **é¢†åŸŸæœåŠ¡**ï¼šè¯†åˆ«è·¨å®ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œå®ç°é¢†åŸŸæœåŠ¡\r\n3. **æ¥å£å…ˆè¡Œ**ï¼šåœ¨åº”ç”¨æœåŠ¡å±‚å®šä¹‰æ¥å£ï¼Œå†åœ¨åŸºç¡€è®¾æ–½å±‚å®ç°\r\n4. **é€æ­¥é›†æˆ**ï¼šæœ€åé›†æˆåŸºç¡€è®¾æ–½å’ŒæŠ€æœ¯æ¡†æ¶\r\n\r\n---\r\n\r\n## ä¸å…¶ä»–æ¶æ„æ¨¡å¼çš„å…³ç³»\r\n\r\n### æ´‹è‘±æ¶æ„ä¸å…¶ä»–æ¶æ„çš„å…³ç³»\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"æ¶æ„å…³ç³»\"\r\n        Onion[æ´‹è‘±æ¶æ„]\r\n        Hex[å…­è¾¹å½¢æ¶æ„]\r\n        Clean[Cleanæ¶æ„]\r\n        DDD[é¢†åŸŸé©±åŠ¨è®¾è®¡]\r\n        Layered[åˆ†å±‚æ¶æ„]\r\n        \r\n        Onion --> Clean\r\n        Hex --> Onion\r\n        DDD --> Onion\r\n        Layered --> Onion\r\n        \r\n        Onion -.å½±å“.-> Clean\r\n    end\r\n    \r\n    style Onion fill:#ffebee\r\n```\r\n\r\n**å…³ç³»è¯´æ˜**ï¼š\r\n- **å…­è¾¹å½¢æ¶æ„**ï¼šæ´‹è‘±æ¶æ„çš„çµæ„Ÿæ¥æºä¹‹ä¸€\r\n- **Cleanæ¶æ„**ï¼šæ´‹è‘±æ¶æ„çš„è¿›åŒ–ç‰ˆæœ¬ï¼Œæ›´è¯¦ç»†çš„å±‚æ¬¡åˆ’åˆ†\r\n- **é¢†åŸŸé©±åŠ¨è®¾è®¡**ï¼šæ´‹è‘±æ¶æ„çš„é¢†åŸŸæ¨¡å‹å±‚ä½“ç°äº†DDDæ€æƒ³\r\n- **åˆ†å±‚æ¶æ„**ï¼šæ´‹è‘±æ¶æ„æ˜¯åˆ†å±‚æ¶æ„çš„ä¾èµ–å€’ç½®ç‰ˆæœ¬\r\n\r\n### æ¶æ„å¯¹æ¯”\r\n\r\n```mermaid\r\ngraph LR\r\n    subgraph \"æ¶æ„å¯¹æ¯”\"\r\n        A[åˆ†å±‚æ¶æ„<br/>å‚ç›´åˆ†å±‚]\r\n        B[å…­è¾¹å½¢æ¶æ„<br/>ç«¯å£é€‚é…å™¨]\r\n        C[æ´‹è‘±æ¶æ„<br/>ä¾èµ–å†…èš]\r\n        D[Cleanæ¶æ„<br/>ç»¼åˆæ–¹æ¡ˆ]\r\n        \r\n        A --> C\r\n        B --> C\r\n        C --> D\r\n    end\r\n    \r\n    style C fill:#ffebee\r\n```\r\n\r\n---\r\n\r\n## åº”ç”¨åœºæ™¯\r\n\r\n### é€‚ç”¨åœºæ™¯\r\n\r\n```mermaid\r\nmindmap\r\n  root((æ´‹è‘±æ¶æ„é€‚ç”¨åœºæ™¯))\r\n    å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ\r\n      ä¼ä¸šçº§åº”ç”¨\r\n      é‡‘èç³»ç»Ÿ\r\n      ç”µå•†å¹³å°\r\n    é¢†åŸŸé©±åŠ¨è®¾è®¡\r\n      DDDé¡¹ç›®\r\n      å¤æ‚ä¸šåŠ¡é€»è¾‘\r\n      é¢†åŸŸæ¨¡å‹ä¸°å¯Œ\r\n    é•¿æœŸç»´æŠ¤é¡¹ç›®\r\n      éœ€è¦æŒç»­æ¼”è¿›\r\n      å›¢é˜Ÿåä½œå¼€å‘\r\n      æŠ€æœ¯æ ˆå¯èƒ½å˜åŒ–\r\n    é«˜æµ‹è¯•è¦æ±‚\r\n      éœ€è¦é«˜æµ‹è¯•è¦†ç›–ç‡\r\n      ä¸šåŠ¡é€»è¾‘å¤æ‚\r\n      è´¨é‡è¦æ±‚é«˜\r\n```\r\n\r\n**å…·ä½“åœºæ™¯**ï¼š\r\n- âœ… **ä¼ä¸šçº§åº”ç”¨**ï¼šå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦é•¿æœŸç»´æŠ¤\r\n- âœ… **DDDé¡¹ç›®**ï¼šé‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡çš„é¡¹ç›®\r\n- âœ… **é‡‘èç³»ç»Ÿ**ï¼šé«˜å¯é æ€§è¦æ±‚ï¼Œä¸šåŠ¡è§„åˆ™å¤æ‚\r\n- âœ… **ç”µå•†å¹³å°**ï¼šä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œéœ€è¦çµæ´»æ‰©å±•\r\n\r\n### ä¸é€‚ç”¨åœºæ™¯\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"ä¸é€‚ç”¨åœºæ™¯\"\r\n        Simple[ç®€å•é¡¹ç›®<br/>åŠŸèƒ½ç®€å•ï¼Œä¸éœ€è¦å¤æ‚æ¶æ„]\r\n        Prototype[åŸå‹å¼€å‘<br/>å¿«é€ŸéªŒè¯ï¼Œä¸éœ€è¦å®Œæ•´æ¶æ„]\r\n        CRUD[ç®€å•CRUD<br/>ä¸šåŠ¡é€»è¾‘ç®€å•]\r\n    end\r\n    \r\n    style Simple fill:#ffcccb\r\n```\r\n\r\n**ä¸é€‚ç”¨åœºæ™¯**ï¼š\r\n- âŒ **ç®€å•é¡¹ç›®**ï¼šåŠŸèƒ½ç®€å•ï¼Œä¸éœ€è¦å¤æ‚æ¶æ„\r\n- âŒ **åŸå‹å¼€å‘**ï¼šå¿«é€ŸéªŒè¯æƒ³æ³•ï¼Œä¸éœ€è¦å®Œæ•´æ¶æ„\r\n- âŒ **ç®€å•CRUD**ï¼šä¸šåŠ¡é€»è¾‘ç®€å•ï¼Œä¸éœ€è¦é¢†åŸŸæ¨¡å‹\r\n\r\n---\r\n\r\n## å®é™…æ¡ˆä¾‹\r\n\r\n### æ¡ˆä¾‹1ï¼šç”µå•†è®¢å•ç³»ç»Ÿ\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"é¢†åŸŸæ¨¡å‹å±‚\"\r\n        Order[è®¢å•å®ä½“<br/>Order Entity]\r\n        Product[å•†å“å®ä½“<br/>Product Entity]\r\n        User[ç”¨æˆ·å®ä½“<br/>User Entity]\r\n        Money[é‡‘é¢å€¼å¯¹è±¡<br/>Money ValueObject]\r\n    end\r\n    \r\n    subgraph \"é¢†åŸŸæœåŠ¡å±‚\"\r\n        OrderDomainService[è®¢å•é¢†åŸŸæœåŠ¡<br/>OrderDomainService]\r\n        PricingService[å®šä»·æœåŠ¡<br/>PricingService]\r\n    end\r\n    \r\n    subgraph \"åº”ç”¨æœåŠ¡å±‚\"\r\n        OrderService[è®¢å•åº”ç”¨æœåŠ¡<br/>OrderService]\r\n        IOrderRepository[IOrderRepositoryæ¥å£]\r\n        IPaymentGateway[IPaymentGatewayæ¥å£]\r\n    end\r\n    \r\n    subgraph \"åŸºç¡€è®¾æ–½å±‚\"\r\n        OrderRepository[è®¢å•ä»“å‚¨å®ç°<br/>OrderRepository]\r\n        PaymentGateway[æ”¯ä»˜ç½‘å…³å®ç°<br/>PaymentGateway]\r\n        Database[(æ•°æ®åº“)]\r\n    end\r\n    \r\n    OrderService --> OrderDomainService\r\n    OrderService --> IOrderRepository\r\n    OrderService --> IPaymentGateway\r\n    \r\n    OrderDomainService --> Order\r\n    OrderDomainService --> Product\r\n    PricingService --> Money\r\n    \r\n    IOrderRepository -.å®ç°.-> OrderRepository\r\n    IPaymentGateway -.å®ç°.-> PaymentGateway\r\n    \r\n    OrderRepository --> Database\r\n    PaymentGateway --> Database\r\n    \r\n    style Order fill:#ffebee\r\n    style OrderDomainService fill:#fff4e1\r\n    style OrderService fill:#e8f5e9\r\n    style OrderRepository fill:#e1f5ff\r\n```\r\n\r\n### æ¡ˆä¾‹2ï¼šæ¸¸æˆæˆ˜æ–—ç³»ç»Ÿ\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"é¢†åŸŸæ¨¡å‹å±‚\"\r\n        Battle[æˆ˜æ–—å®ä½“<br/>Battle Entity]\r\n        Unit[å•ä½å®ä½“<br/>Unit Entity]\r\n        Skill[æŠ€èƒ½å®ä½“<br/>Skill Entity]\r\n        Position[ä½ç½®å€¼å¯¹è±¡<br/>Position ValueObject]\r\n    end\r\n    \r\n    subgraph \"é¢†åŸŸæœåŠ¡å±‚\"\r\n        BattleDomainService[æˆ˜æ–—é¢†åŸŸæœåŠ¡<br/>BattleDomainService]\r\n        DamageService[ä¼¤å®³è®¡ç®—æœåŠ¡<br/>DamageService]\r\n    end\r\n    \r\n    subgraph \"åº”ç”¨æœåŠ¡å±‚\"\r\n        BattleService[æˆ˜æ–—åº”ç”¨æœåŠ¡<br/>BattleService]\r\n        IBattleRepository[IBattleRepositoryæ¥å£]\r\n        IVisualService[IVisualServiceæ¥å£]\r\n    end\r\n    \r\n    subgraph \"åŸºç¡€è®¾æ–½å±‚\"\r\n        BattleRepository[æˆ˜æ–—ä»“å‚¨å®ç°<br/>BattleRepository]\r\n        VisualService[è§†è§‰æœåŠ¡å®ç°<br/>VisualService]\r\n        Database[(æ¸¸æˆæ•°æ®åº“)]\r\n        Unity[Unityå¼•æ“]\r\n    end\r\n    \r\n    BattleService --> BattleDomainService\r\n    BattleService --> IBattleRepository\r\n    BattleService --> IVisualService\r\n    \r\n    BattleDomainService --> Battle\r\n    BattleDomainService --> Unit\r\n    DamageService --> Skill\r\n    DamageService --> Position\r\n    \r\n    IBattleRepository -.å®ç°.-> BattleRepository\r\n    IVisualService -.å®ç°.-> VisualService\r\n    \r\n    BattleRepository --> Database\r\n    VisualService --> Unity\r\n    \r\n    style Battle fill:#ffebee\r\n    style BattleDomainService fill:#fff4e1\r\n    style BattleService fill:#e8f5e9\r\n    style BattleRepository fill:#e1f5ff\r\n```\r\n\r\n---\r\n\r\n## è®¾è®¡åŸåˆ™\r\n\r\n### SOLIDåŸåˆ™åœ¨æ´‹è‘±æ¶æ„ä¸­çš„åº”ç”¨\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"SOLIDåŸåˆ™\"\r\n        S[å•ä¸€èŒè´£åŸåˆ™<br/>æ¯å±‚èŒè´£å•ä¸€]\r\n        O[å¼€é—­åŸåˆ™<br/>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­]\r\n        L[é‡Œæ°æ›¿æ¢åŸåˆ™<br/>æ¥å£å¯æ›¿æ¢å®ç°]\r\n        I[æ¥å£éš”ç¦»åŸåˆ™<br/>æ¥å£å®šä¹‰æ¸…æ™°]\r\n        D[ä¾èµ–å€’ç½®åŸåˆ™<br/>ä¾èµ–æŠ½è±¡è€Œéå…·ä½“]\r\n    end\r\n    \r\n    style D fill:#ffebee\r\n```\r\n\r\n**åŸåˆ™åº”ç”¨**ï¼š\r\n- **å•ä¸€èŒè´£**ï¼šæ¯å±‚åªè´Ÿè´£è‡ªå·±çš„èŒè´£\r\n- **å¼€é—­åŸåˆ™**ï¼šé€šè¿‡æ¥å£æ‰©å±•ï¼Œæ— éœ€ä¿®æ”¹å†…å±‚\r\n- **é‡Œæ°æ›¿æ¢**ï¼šæ¥å£å®ç°å¯ä»¥æ›¿æ¢\r\n- **æ¥å£éš”ç¦»**ï¼šæ¥å£å®šä¹‰æ¸…æ™°ï¼ŒèŒè´£å•ä¸€\r\n- **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡æ¥å£ï¼Œè€Œéå…·ä½“å®ç°\r\n\r\n---\r\n\r\n## æ€»ç»“\r\n\r\næ´‹è‘±æ¶æ„æ¨¡å¼æ˜¯ä¸€ç§ä»¥é¢†åŸŸæ¨¡å‹ä¸ºä¸­å¿ƒçš„æ¶æ„æ¨¡å¼ï¼Œé€šè¿‡åŒå¿ƒåœ†ç»“æ„ç»„ç»‡ç³»ç»Ÿï¼Œå°†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ”¾åœ¨ä¸­å¿ƒï¼ŒåŸºç¡€è®¾æ–½æ”¾åœ¨å¤–å›´ï¼Œä¾èµ–æ–¹å‘ä»å¤–å‘å†…ã€‚\r\n\r\n**æ ¸å¿ƒä»·å€¼**ï¼š\r\n- ğŸ¯ **é¢†åŸŸæ¨¡å‹ç‹¬ç«‹**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘å®Œå…¨ç‹¬ç«‹äºåŸºç¡€è®¾æ–½\r\n- ğŸ§ª **é«˜åº¦å¯æµ‹è¯•**ï¼šé¢†åŸŸæ¨¡å‹å¯ä»¥ç‹¬ç«‹æµ‹è¯•\r\n- ğŸ”„ **æŠ€æœ¯æ— å…³**ï¼šå¯ä»¥è½»æ¾æ›¿æ¢ä»»ä½•æŠ€æœ¯å®ç°\r\n- ğŸ“ **ä¾èµ–æ¸…æ™°**ï¼šä¾èµ–æ–¹å‘æ˜ç¡®ï¼Œæ˜“äºç†è§£\r\n\r\n**é€‚ç”¨åœºæ™¯**ï¼š\r\n- âœ… å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ\r\n- âœ… DDDé¡¹ç›®\r\n- âœ… é•¿æœŸç»´æŠ¤é¡¹ç›®\r\n- âœ… é«˜æµ‹è¯•è¦æ±‚\r\n\r\n**æ³¨æ„äº‹é¡¹**ï¼š\r\n- âš ï¸ å¤æ‚åº¦è¾ƒé«˜ï¼Œéœ€è¦å›¢é˜Ÿç†è§£\r\n- âš ï¸ å¼€å‘å¼€é”€è¾ƒå¤§ï¼Œéœ€è¦å®šä¹‰æ¥å£\r\n- âš ï¸ ç®€å•é¡¹ç›®å¯èƒ½è¿‡åº¦è®¾è®¡\r\n\r\næ´‹è‘±æ¶æ„æ˜¯æ„å»ºå¯ç»´æŠ¤ã€å¯æµ‹è¯•ã€å¯æ‰©å±•ç³»ç»Ÿçš„ä¼˜ç§€é€‰æ‹©ï¼Œç‰¹åˆ«é€‚åˆé‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡çš„å¤æ‚ä¸šåŠ¡ç³»ç»Ÿã€‚\r\n\r\n"
        }
    ]
}