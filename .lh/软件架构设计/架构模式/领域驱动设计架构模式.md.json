{
    "sourceFile": "è½¯ä»¶æ¶æ„è®¾è®¡/æ¶æ„æ¨¡å¼/é¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„æ¨¡å¼.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1767096591624,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1767096591624,
            "name": "Commit-0",
            "content": "# é¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„æ¨¡å¼ï¼ˆDomain-Driven Design Architecture Patternï¼‰\r\n\r\n## ç›®å½•\r\n\r\n- [æ¦‚è¿°](#æ¦‚è¿°)\r\n- [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)\r\n- [æ¶æ„ç»“æ„](#æ¶æ„ç»“æ„)\r\n- [è®¾è®¡è§„åˆ™](#è®¾è®¡è§„åˆ™)\r\n- [ä¼˜ç¼ºç‚¹åˆ†æ](#ä¼˜ç¼ºç‚¹åˆ†æ)\r\n- [å®è·µæŒ‡å—](#å®è·µæŒ‡å—)\r\n- [ä¸å…¶ä»–æ¶æ„æ¨¡å¼çš„å…³ç³»](#ä¸å…¶ä»–æ¶æ„æ¨¡å¼çš„å…³ç³»)\r\n- [åº”ç”¨åœºæ™¯](#åº”ç”¨åœºæ™¯)\r\n- [å®é™…æ¡ˆä¾‹](#å®é™…æ¡ˆä¾‹)\r\n- [è®¾è®¡åŸåˆ™](#è®¾è®¡åŸåˆ™)\r\n- [æ€»ç»“](#æ€»ç»“)\r\n\r\n---\r\n\r\n## æ¦‚è¿°\r\n\r\n**é¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„æ¨¡å¼ï¼ˆDomain-Driven Design Architecture Patternï¼ŒDDDï¼‰**æ˜¯ç”±Eric Evansæå‡ºçš„ä¸€ç§è½¯ä»¶è®¾è®¡æ–¹æ³•è®ºï¼Œå®ƒå¼ºè°ƒä»¥ä¸šåŠ¡é¢†åŸŸä¸ºæ ¸å¿ƒï¼Œé€šè¿‡é¢†åŸŸæ¨¡å‹æ¥è¡¨è¾¾ä¸šåŠ¡é€»è¾‘ï¼Œä½¿ç”¨é€šç”¨è¯­è¨€ï¼ˆUbiquitous Languageï¼‰æ¥æ²Ÿé€šä¸šåŠ¡å’ŒæŠ€æœ¯ã€‚\r\n\r\n### ä»€ä¹ˆæ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Ÿ\r\n\r\né¢†åŸŸé©±åŠ¨è®¾è®¡æ˜¯ä¸€ç§ä»¥é¢†åŸŸæ¨¡å‹ä¸ºä¸­å¿ƒçš„æ¶æ„æ–¹æ³•ï¼š\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"DDDæ ¸å¿ƒæ¦‚å¿µ\"\r\n        Domain[é¢†åŸŸæ¨¡å‹<br/>Domain Model<br/>æ ¸å¿ƒ]\r\n        UbiquitousLanguage[é€šç”¨è¯­è¨€<br/>Ubiquitous Language]\r\n        BoundedContext[é™ç•Œä¸Šä¸‹æ–‡<br/>Bounded Context]\r\n        Aggregate[èšåˆ<br/>Aggregate]\r\n    end\r\n    \r\n    Domain --> UbiquitousLanguage\r\n    Domain --> BoundedContext\r\n    Domain --> Aggregate\r\n    \r\n    style Domain fill:#ffebee\r\n```\r\n\r\n**æ ¸å¿ƒåŸåˆ™**ï¼š\r\n- **é¢†åŸŸæ¨¡å‹åœ¨ä¸­å¿ƒ**ï¼šä¸šåŠ¡é€»è¾‘é€šè¿‡é¢†åŸŸæ¨¡å‹è¡¨è¾¾\r\n- **é€šç”¨è¯­è¨€**ï¼šä¸šåŠ¡å’ŒæŠ€æœ¯ä½¿ç”¨ç›¸åŒçš„è¯­è¨€\r\n- **é™ç•Œä¸Šä¸‹æ–‡**ï¼šæ˜ç¡®ä¸šåŠ¡è¾¹ç•Œå’Œä¸Šä¸‹æ–‡\r\n- **èšåˆæ ¹**ï¼šä¿è¯æ•°æ®ä¸€è‡´æ€§\r\n\r\n### ä¸ºä»€ä¹ˆéœ€è¦é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Ÿ\r\n\r\né¢†åŸŸé©±åŠ¨è®¾è®¡è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š\r\n- **ä¸šåŠ¡å¤æ‚æ€§**ï¼šé€šè¿‡é¢†åŸŸæ¨¡å‹è¡¨è¾¾å¤æ‚ä¸šåŠ¡é€»è¾‘\r\n- **æ²Ÿé€šéšœç¢**ï¼šä½¿ç”¨é€šç”¨è¯­è¨€æ¶ˆé™¤ä¸šåŠ¡å’ŒæŠ€æœ¯ä¹‹é—´çš„æ²Ÿé€šéšœç¢\r\n- **ä»£ç è´¨é‡**ï¼šé¢†åŸŸæ¨¡å‹ä½¿ä»£ç æ›´è´´è¿‘ä¸šåŠ¡ï¼Œæ˜“äºç†è§£\r\n- **å¯ç»´æŠ¤æ€§**ï¼šæ¸…æ™°çš„é¢†åŸŸè¾¹ç•Œï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•\r\n- **ä¸šåŠ¡ä»·å€¼**ï¼šä»£ç ç›´æ¥åæ˜ ä¸šåŠ¡ä»·å€¼ï¼Œè€ŒéæŠ€æœ¯å®ç°\r\n\r\n---\r\n\r\n## æ ¸å¿ƒæ¦‚å¿µ\r\n\r\n### æ ¸å¿ƒæ€æƒ³\r\n\r\né¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³æ˜¯**ä»¥é¢†åŸŸä¸ºä¸­å¿ƒï¼ˆDomain-Centricï¼‰**ï¼š\r\n\r\n```mermaid\r\ngraph LR\r\n    subgraph \"DDDæ ¸å¿ƒæ€æƒ³\"\r\n        Business[ä¸šåŠ¡é¢†åŸŸ<br/>Business Domain]\r\n        Model[é¢†åŸŸæ¨¡å‹<br/>Domain Model]\r\n        Code[ä»£ç å®ç°<br/>Code Implementation]\r\n        \r\n        Business --> Model\r\n        Model --> Code\r\n        Code -.åæ˜ .-> Business\r\n    end\r\n    \r\n    style Model fill:#ffebee\r\n```\r\n\r\n**å…³é”®åŸåˆ™**ï¼š\r\n1. **é¢†åŸŸæ¨¡å‹åœ¨ä¸­å¿ƒ**ï¼šä¸šåŠ¡é€»è¾‘é€šè¿‡é¢†åŸŸæ¨¡å‹è¡¨è¾¾\r\n2. **é€šç”¨è¯­è¨€**ï¼šä¸šåŠ¡å’ŒæŠ€æœ¯ä½¿ç”¨ç›¸åŒçš„è¯­è¨€\r\n3. **é™ç•Œä¸Šä¸‹æ–‡**ï¼šæ˜ç¡®ä¸šåŠ¡è¾¹ç•Œ\r\n4. **èšåˆæ ¹**ï¼šä¿è¯æ•°æ®ä¸€è‡´æ€§\r\n\r\n### åŸºæœ¬ç‰¹å¾\r\n\r\n- **é¢†åŸŸæ¨¡å‹**ï¼šé€šè¿‡æ¨¡å‹è¡¨è¾¾ä¸šåŠ¡é€»è¾‘\r\n- **é€šç”¨è¯­è¨€**ï¼šä¸šåŠ¡å’ŒæŠ€æœ¯ä½¿ç”¨ç›¸åŒçš„è¯­è¨€\r\n- **é™ç•Œä¸Šä¸‹æ–‡**ï¼šæ˜ç¡®ä¸šåŠ¡è¾¹ç•Œ\r\n- **èšåˆæ ¹**ï¼šä¿è¯æ•°æ®ä¸€è‡´æ€§\r\n- **é¢†åŸŸæœåŠ¡**ï¼šè·¨å®ä½“çš„ä¸šåŠ¡é€»è¾‘\r\n\r\n---\r\n\r\n## æ¶æ„ç»“æ„\r\n\r\n### DDDå®Œæ•´æ¶æ„ç»“æ„\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded Contextï¼‰\"\r\n        subgraph \"é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰\"\r\n            Entities[å®ä½“<br/>Entities]\r\n            ValueObjects[å€¼å¯¹è±¡<br/>Value Objects]\r\n            Aggregates[èšåˆ<br/>Aggregates]\r\n            DomainServices[é¢†åŸŸæœåŠ¡<br/>Domain Services]\r\n            DomainEvents[é¢†åŸŸäº‹ä»¶<br/>Domain Events]\r\n        end\r\n        \r\n        subgraph \"åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰\"\r\n            AppServices[åº”ç”¨æœåŠ¡<br/>Application Services]\r\n            DTOs[æ•°æ®ä¼ è¾“å¯¹è±¡<br/>DTOs]\r\n            Interfaces[æ¥å£å®šä¹‰<br/>Interfaces]\r\n        end\r\n        \r\n        subgraph \"åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructure Layerï¼‰\"\r\n            Repositories[ä»“å‚¨å®ç°<br/>Repository Implementations]\r\n            ExternalServices[å¤–éƒ¨æœåŠ¡<br/>External Services]\r\n            Frameworks[æ¡†æ¶é›†æˆ<br/>Framework Integration]\r\n        end\r\n        \r\n        subgraph \"è¡¨ç°å±‚ï¼ˆPresentation Layerï¼‰\"\r\n            Controllers[æ§åˆ¶å™¨<br/>Controllers]\r\n            Views[è§†å›¾<br/>Views]\r\n        end\r\n    end\r\n    \r\n    Controllers --> AppServices\r\n    AppServices --> DomainServices\r\n    AppServices --> Interfaces\r\n    DomainServices --> Entities\r\n    DomainServices --> Aggregates\r\n    Entities --> ValueObjects\r\n    Aggregates --> Entities\r\n    Interfaces -.å®ç°.-> Repositories\r\n    Repositories --> ExternalServices\r\n    \r\n    style Entities fill:#ffebee\r\n    style Aggregates fill:#fff4e1\r\n    style DomainServices fill:#e8f5e9\r\n```\r\n\r\n### æ ¸å¿ƒç»„ä»¶è¯¦è§£\r\n\r\n#### 1. å®ä½“ï¼ˆEntityï¼‰\r\n\r\n**å®šä¹‰**ï¼šæœ‰å”¯ä¸€æ ‡è¯†çš„å¯¹è±¡\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"å®ä½“ç‰¹å¾\"\r\n        Identity[å”¯ä¸€æ ‡è¯†<br/>Unique Identity]\r\n        State[å¯å˜çŠ¶æ€<br/>Mutable State]\r\n        Behavior[è¡Œä¸ºæ–¹æ³•<br/>Behavior Methods]\r\n        Lifecycle[ç”Ÿå‘½å‘¨æœŸ<br/>Lifecycle]\r\n    end\r\n    \r\n    style Identity fill:#ffebee\r\n```\r\n\r\n**ç‰¹ç‚¹**ï¼š\r\n- æœ‰å”¯ä¸€æ ‡è¯†ï¼ˆIDï¼‰\r\n- çŠ¶æ€å¯ä»¥æ”¹å˜\r\n- åŒ…å«ä¸šåŠ¡è¡Œä¸º\r\n- æœ‰ç”Ÿå‘½å‘¨æœŸ\r\n\r\n**ç¤ºä¾‹**ï¼š\r\n- è®¢å•ï¼ˆOrderï¼‰ï¼šæœ‰è®¢å•IDï¼ŒçŠ¶æ€å¯ä»¥æ”¹å˜\r\n- ç”¨æˆ·ï¼ˆUserï¼‰ï¼šæœ‰ç”¨æˆ·IDï¼Œä¿¡æ¯å¯ä»¥æ›´æ–°\r\n- äº§å“ï¼ˆProductï¼‰ï¼šæœ‰äº§å“IDï¼Œåº“å­˜å¯ä»¥å˜åŒ–\r\n\r\n#### 2. å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰\r\n\r\n**å®šä¹‰**ï¼šé€šè¿‡å€¼ç›¸ç­‰åˆ¤æ–­çš„å¯¹è±¡\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"å€¼å¯¹è±¡ç‰¹å¾\"\r\n        ValueEquality[å€¼ç›¸ç­‰<br/>Value Equality]\r\n        Immutable[ä¸å¯å˜<br/>Immutable]\r\n        NoIdentity[æ— æ ‡è¯†<br/>No Identity]\r\n        Composition[ç»„åˆä½¿ç”¨<br/>Composition]\r\n    end\r\n    \r\n    style Immutable fill:#ffebee\r\n```\r\n\r\n**ç‰¹ç‚¹**ï¼š\r\n- é€šè¿‡å€¼ç›¸ç­‰åˆ¤æ–­\r\n- ä¸å¯å˜ï¼ˆImmutableï¼‰\r\n- æ— å”¯ä¸€æ ‡è¯†\r\n- é€šå¸¸ä½œä¸ºå®ä½“çš„å±æ€§\r\n\r\n**ç¤ºä¾‹**ï¼š\r\n- é‡‘é¢ï¼ˆMoneyï¼‰ï¼šé€šè¿‡æ•°å€¼ç›¸ç­‰åˆ¤æ–­\r\n- åœ°å€ï¼ˆAddressï¼‰ï¼šé€šè¿‡åœ°å€å†…å®¹ç›¸ç­‰åˆ¤æ–­\r\n- æ—¥æœŸï¼ˆDateï¼‰ï¼šé€šè¿‡æ—¥æœŸå€¼ç›¸ç­‰åˆ¤æ–­\r\n\r\n#### 3. èšåˆï¼ˆAggregateï¼‰\r\n\r\n**å®šä¹‰**ï¼šä¸€ç»„ç›¸å…³å¯¹è±¡çš„é›†åˆï¼Œç”±èšåˆæ ¹ç®¡ç†\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"èšåˆç»“æ„\"\r\n        AggregateRoot[èšåˆæ ¹<br/>Aggregate Root]\r\n        Entity1[å®ä½“1<br/>Entity]\r\n        Entity2[å®ä½“2<br/>Entity]\r\n        ValueObject1[å€¼å¯¹è±¡1<br/>Value Object]\r\n        ValueObject2[å€¼å¯¹è±¡2<br/>Value Object]\r\n        \r\n        AggregateRoot --> Entity1\r\n        AggregateRoot --> Entity2\r\n        Entity1 --> ValueObject1\r\n        Entity2 --> ValueObject2\r\n    end\r\n    \r\n    style AggregateRoot fill:#ffebee\r\n```\r\n\r\n**ç‰¹ç‚¹**ï¼š\r\n- æœ‰èšåˆæ ¹ï¼ˆAggregate Rootï¼‰\r\n- èšåˆæ ¹æ˜¯å”¯ä¸€çš„å¤–éƒ¨è®¿é—®ç‚¹\r\n- ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼ˆä¸å˜é‡ï¼‰\r\n- æœ‰æ˜ç¡®çš„è¾¹ç•Œ\r\n\r\n**ç¤ºä¾‹**ï¼š\r\n- è®¢å•èšåˆï¼šè®¢å•ï¼ˆèšåˆæ ¹ï¼‰+ è®¢å•é¡¹ï¼ˆå®ä½“ï¼‰+ åœ°å€ï¼ˆå€¼å¯¹è±¡ï¼‰\r\n- ç”¨æˆ·èšåˆï¼šç”¨æˆ·ï¼ˆèšåˆæ ¹ï¼‰+ åœ°å€åˆ—è¡¨ï¼ˆå®ä½“ï¼‰+ è”ç³»æ–¹å¼ï¼ˆå€¼å¯¹è±¡ï¼‰\r\n\r\n#### 4. èšåˆæ ¹ï¼ˆAggregate Rootï¼‰\r\n\r\n**å®šä¹‰**ï¼šèšåˆçš„å…¥å£ç‚¹ï¼Œå¤–éƒ¨åªèƒ½é€šè¿‡èšåˆæ ¹è®¿é—®èšåˆ\r\n\r\n```mermaid\r\ngraph LR\r\n    subgraph \"èšåˆæ ¹èŒè´£\"\r\n        Access[å”¯ä¸€è®¿é—®ç‚¹<br/>Single Access Point]\r\n        Consistency[ä¿è¯ä¸€è‡´æ€§<br/>Maintain Consistency]\r\n        Invariant[ç»´æŠ¤ä¸å˜é‡<br/>Maintain Invariants]\r\n        Boundary[å®šä¹‰è¾¹ç•Œ<br/>Define Boundary]\r\n    end\r\n    \r\n    style Access fill:#ffebee\r\n```\r\n\r\n**èŒè´£**ï¼š\r\n- æ˜¯èšåˆçš„å”¯ä¸€å¤–éƒ¨è®¿é—®ç‚¹\r\n- ä¿è¯èšåˆå†…æ•°æ®ä¸€è‡´æ€§\r\n- ç»´æŠ¤ä¸šåŠ¡ä¸å˜é‡\r\n- å®šä¹‰èšåˆè¾¹ç•Œ\r\n\r\n#### 5. é¢†åŸŸæœåŠ¡ï¼ˆDomain Serviceï¼‰\r\n\r\n**å®šä¹‰**ï¼šè·¨å®ä½“çš„ä¸šåŠ¡é€»è¾‘\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"é¢†åŸŸæœåŠ¡\"\r\n        CrossEntity[è·¨å®ä½“é€»è¾‘<br/>Cross-Entity Logic]\r\n        ComplexRules[å¤æ‚ä¸šåŠ¡è§„åˆ™<br/>Complex Business Rules]\r\n        Stateless[æ— çŠ¶æ€<br/>Stateless]\r\n        PureDomain[çº¯é¢†åŸŸé€»è¾‘<br/>Pure Domain Logic]\r\n    end\r\n    \r\n    style CrossEntity fill:#ffebee\r\n```\r\n\r\n**ç‰¹ç‚¹**ï¼š\r\n- åŒ…å«è·¨å®ä½“çš„ä¸šåŠ¡é€»è¾‘\r\n- å®ç°å¤æ‚çš„ä¸šåŠ¡è§„åˆ™\r\n- æ— çŠ¶æ€æœåŠ¡\r\n- çº¯é¢†åŸŸé€»è¾‘ï¼Œä¸ä¾èµ–åŸºç¡€è®¾æ–½\r\n\r\n**ç¤ºä¾‹**ï¼š\r\n- å®šä»·æœåŠ¡ï¼šè®¡ç®—è®¢å•æ€»ä»·ï¼ˆæ¶‰åŠè®¢å•ã€äº§å“ã€æŠ˜æ‰£ï¼‰\r\n- è½¬è´¦æœåŠ¡ï¼šå¤„ç†è´¦æˆ·è½¬è´¦ï¼ˆæ¶‰åŠä¸¤ä¸ªè´¦æˆ·ï¼‰\r\n\r\n#### 6. é¢†åŸŸäº‹ä»¶ï¼ˆDomain Eventï¼‰\r\n\r\n**å®šä¹‰**ï¼šé¢†åŸŸä¸­å‘ç”Ÿçš„é‡è¦äº‹æƒ…\r\n\r\n```mermaid\r\ngraph LR\r\n    subgraph \"é¢†åŸŸäº‹ä»¶\"\r\n        Occurred[å·²å‘ç”Ÿ<br/>Already Occurred]\r\n        Immutable[ä¸å¯å˜<br/>Immutable]\r\n        Timestamp[æ—¶é—´æˆ³<br/>Timestamp]\r\n        Payload[äº‹ä»¶æ•°æ®<br/>Event Data]\r\n    end\r\n    \r\n    style Occurred fill:#ffebee\r\n```\r\n\r\n**ç‰¹ç‚¹**ï¼š\r\n- è¡¨ç¤ºå·²ç»å‘ç”Ÿçš„äº‹æƒ…\r\n- ä¸å¯å˜\r\n- æœ‰æ—¶é—´æˆ³\r\n- åŒ…å«äº‹ä»¶æ•°æ®\r\n\r\n**ç¤ºä¾‹**ï¼š\r\n- è®¢å•å·²åˆ›å»ºï¼ˆOrderCreatedï¼‰\r\n- æ”¯ä»˜å·²å®Œæˆï¼ˆPaymentCompletedï¼‰\r\n- åº“å­˜å·²æ›´æ–°ï¼ˆInventoryUpdatedï¼‰\r\n\r\n#### 7. ä»“å‚¨ï¼ˆRepositoryï¼‰\r\n\r\n**å®šä¹‰**ï¼šå°è£…æ•°æ®è®¿é—®é€»è¾‘\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"ä»“å‚¨æ¨¡å¼\"\r\n        Interface[ä»“å‚¨æ¥å£<br/>Repository Interface]\r\n        Implementation[ä»“å‚¨å®ç°<br/>Repository Implementation]\r\n        Abstraction[æ•°æ®è®¿é—®æŠ½è±¡<br/>Data Access Abstraction]\r\n        Persistence[æŒä¹…åŒ–å°è£…<br/>Persistence Encapsulation]\r\n    end\r\n    \r\n    style Interface fill:#ffebee\r\n```\r\n\r\n**èŒè´£**ï¼š\r\n- å°è£…æ•°æ®è®¿é—®é€»è¾‘\r\n- æä¾›èšåˆçš„æŒä¹…åŒ–æ¥å£\r\n- æŠ½è±¡æ•°æ®å­˜å‚¨ç»†èŠ‚\r\n- å®ç°æ•°æ®è®¿é—®æŠ½è±¡\r\n\r\n#### 8. é™ç•Œä¸Šä¸‹æ–‡ï¼ˆBounded Contextï¼‰\r\n\r\n**å®šä¹‰**ï¼šæ˜ç¡®çš„ä¸šåŠ¡è¾¹ç•Œ\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"é™ç•Œä¸Šä¸‹æ–‡\"\r\n        Boundary[æ˜ç¡®è¾¹ç•Œ<br/>Clear Boundary]\r\n        UbiquitousLanguage[é€šç”¨è¯­è¨€<br/>Ubiquitous Language]\r\n        Model[é¢†åŸŸæ¨¡å‹<br/>Domain Model]\r\n        Context[ä¸Šä¸‹æ–‡æ˜ å°„<br/>Context Mapping]\r\n    end\r\n    \r\n    style Boundary fill:#ffebee\r\n```\r\n\r\n**ç‰¹ç‚¹**ï¼š\r\n- æœ‰æ˜ç¡®çš„ä¸šåŠ¡è¾¹ç•Œ\r\n- ä½¿ç”¨é€šç”¨è¯­è¨€\r\n- åŒ…å«å®Œæ•´çš„é¢†åŸŸæ¨¡å‹\r\n- ä¸å…¶ä»–ä¸Šä¸‹æ–‡æœ‰æ˜ å°„å…³ç³»\r\n\r\n---\r\n\r\n## è®¾è®¡è§„åˆ™\r\n\r\n### èšåˆè®¾è®¡è§„åˆ™\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"èšåˆè®¾è®¡è§„åˆ™\"\r\n        Rule1[èšåˆæ ¹æ˜¯å”¯ä¸€è®¿é—®ç‚¹<br/>Only Access Through Root]\r\n        Rule2[èšåˆå†…å¼ºä¸€è‡´æ€§<br/>Strong Consistency Inside]\r\n        Rule3[èšåˆé—´æœ€ç»ˆä¸€è‡´æ€§<br/>Eventual Consistency Between]\r\n        Rule4[èšåˆè¾¹ç•Œè¦å°<br/>Keep Aggregates Small]\r\n    end\r\n    \r\n    style Rule1 fill:#ffebee\r\n```\r\n\r\n**è§„åˆ™è¯´æ˜**ï¼š\r\n- âœ… **å”¯ä¸€è®¿é—®ç‚¹**ï¼šå¤–éƒ¨åªèƒ½é€šè¿‡èšåˆæ ¹è®¿é—®èšåˆ\r\n- âœ… **å¼ºä¸€è‡´æ€§**ï¼šèšåˆå†…æ•°æ®å¿…é¡»ä¸€è‡´\r\n- âœ… **æœ€ç»ˆä¸€è‡´æ€§**ï¼šèšåˆé—´å¯ä»¥æœ€ç»ˆä¸€è‡´\r\n- âœ… **è¾¹ç•Œè¦å°**ï¼šèšåˆåº”è¯¥å°½å¯èƒ½å°\r\n\r\n### å®ä½“å’Œå€¼å¯¹è±¡é€‰æ‹©è§„åˆ™\r\n\r\n```mermaid\r\ngraph LR\r\n    subgraph \"é€‰æ‹©è§„åˆ™\"\r\n        HasIdentity{æœ‰å”¯ä¸€æ ‡è¯†?}\r\n        Mutable{çŠ¶æ€å¯å˜?}\r\n        Entity[å®ä½“<br/>Entity]\r\n        ValueObject[å€¼å¯¹è±¡<br/>Value Object]\r\n        \r\n        HasIdentity -->|æ˜¯| Entity\r\n        HasIdentity -->|å¦| Mutable\r\n        Mutable -->|æ˜¯| Entity\r\n        Mutable -->|å¦| ValueObject\r\n    end\r\n    \r\n    style Entity fill:#ffebee\r\n    style ValueObject fill:#fff4e1\r\n```\r\n\r\n**é€‰æ‹©æ ‡å‡†**ï¼š\r\n- **å®ä½“**ï¼šæœ‰å”¯ä¸€æ ‡è¯†ï¼Œæˆ–çŠ¶æ€éœ€è¦æ”¹å˜\r\n- **å€¼å¯¹è±¡**ï¼šæ— å”¯ä¸€æ ‡è¯†ï¼Œä¸”ä¸å¯å˜\r\n\r\n---\r\n\r\n## ä¼˜ç¼ºç‚¹åˆ†æ\r\n\r\n### ä¼˜ç‚¹\r\n\r\n```mermaid\r\nmindmap\r\n  root((DDDä¼˜ç‚¹))\r\n    ä¸šåŠ¡ä»·å€¼\r\n      ä»£ç åæ˜ ä¸šåŠ¡\r\n      é€šç”¨è¯­è¨€æ²Ÿé€š\r\n      ä¸šåŠ¡é€»è¾‘æ¸…æ™°\r\n    å¯ç»´æŠ¤æ€§\r\n      é¢†åŸŸæ¨¡å‹æ¸…æ™°\r\n      èŒè´£åˆ†ç¦»æ˜ç¡®\r\n      æ˜“äºç†è§£\r\n    å¯æ‰©å±•æ€§\r\n      èšåˆè¾¹ç•Œæ¸…æ™°\r\n      æ˜“äºæ·»åŠ åŠŸèƒ½\r\n      æŠ€æœ¯æ— å…³\r\n    è´¨é‡ä¿è¯\r\n      æ•°æ®ä¸€è‡´æ€§\r\n      ä¸šåŠ¡è§„åˆ™éªŒè¯\r\n      æµ‹è¯•å‹å¥½\r\n```\r\n\r\n**è¯¦ç»†è¯´æ˜**ï¼š\r\n- âœ… **ä¸šåŠ¡ä»·å€¼**ï¼šä»£ç ç›´æ¥åæ˜ ä¸šåŠ¡ï¼Œæ˜“äºç†è§£\r\n- âœ… **é€šç”¨è¯­è¨€**ï¼šæ¶ˆé™¤ä¸šåŠ¡å’ŒæŠ€æœ¯ä¹‹é—´çš„æ²Ÿé€šéšœç¢\r\n- âœ… **å¯ç»´æŠ¤æ€§**ï¼šé¢†åŸŸæ¨¡å‹æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤\r\n- âœ… **å¯æ‰©å±•æ€§**ï¼šèšåˆè¾¹ç•Œæ¸…æ™°ï¼Œæ˜“äºæ‰©å±•\r\n- âœ… **è´¨é‡ä¿è¯**ï¼šé€šè¿‡èšåˆä¿è¯æ•°æ®ä¸€è‡´æ€§\r\n\r\n### ç¼ºç‚¹\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"DDDç¼ºç‚¹\"\r\n        Complexity[å¤æ‚åº¦é«˜<br/>éœ€è¦æ·±å…¥ç†è§£ä¸šåŠ¡]\r\n        Learning[å­¦ä¹ æ›²çº¿é™¡å³­<br/>éœ€è¦æŒæ¡DDDæ¦‚å¿µ]\r\n        Overhead[å¼€å‘å¼€é”€å¤§<br/>éœ€è¦æ›´å¤šæŠ½è±¡]\r\n        Team[å›¢é˜Ÿè¦æ±‚é«˜<br/>éœ€è¦ä¸šåŠ¡å’ŒæŠ€æœ¯åä½œ]\r\n    end\r\n    \r\n    style Complexity fill:#ffcccb\r\n    style Learning fill:#ffcccb\r\n```\r\n\r\n**è¯¦ç»†è¯´æ˜**ï¼š\r\n- âŒ **å¤æ‚åº¦é«˜**ï¼šéœ€è¦æ·±å…¥ç†è§£ä¸šåŠ¡é¢†åŸŸ\r\n- âŒ **å­¦ä¹ æ›²çº¿é™¡å³­**ï¼šéœ€è¦æŒæ¡DDDæ¦‚å¿µå’Œæ–¹æ³•\r\n- âŒ **å¼€å‘å¼€é”€å¤§**ï¼šéœ€è¦æ›´å¤šæŠ½è±¡å’Œè®¾è®¡\r\n- âŒ **å›¢é˜Ÿè¦æ±‚é«˜**ï¼šéœ€è¦ä¸šåŠ¡å’ŒæŠ€æœ¯å¯†åˆ‡åä½œ\r\n- âŒ **å¯èƒ½è¿‡åº¦è®¾è®¡**ï¼šç®€å•é¡¹ç›®å¯èƒ½ä¸éœ€è¦DDD\r\n\r\n---\r\n\r\n## å®è·µæŒ‡å—\r\n\r\n### DDDå®æ–½æ­¥éª¤\r\n\r\n```mermaid\r\ngraph TD\r\n    Start[å¼€å§‹DDD] --> Step1[1. è¯†åˆ«é™ç•Œä¸Šä¸‹æ–‡<br/>Identify Bounded Contexts]\r\n    Step1 --> Step2[2. å»ºç«‹é€šç”¨è¯­è¨€<br/>Establish Ubiquitous Language]\r\n    Step2 --> Step3[3. è¯†åˆ«èšåˆ<br/>Identify Aggregates]\r\n    Step3 --> Step4[4. è®¾è®¡å®ä½“å’Œå€¼å¯¹è±¡<br/>Design Entities and Value Objects]\r\n    Step4 --> Step5[5. å®šä¹‰é¢†åŸŸæœåŠ¡<br/>Define Domain Services]\r\n    Step5 --> Step6[6. å®ç°ä»“å‚¨<br/>Implement Repositories]\r\n    Step6 --> End[å®Œæˆ]\r\n    \r\n    style Step1 fill:#ffebee\r\n    style Step2 fill:#fff4e1\r\n    style Step3 fill:#e8f5e9\r\n```\r\n\r\n### é¢†åŸŸå»ºæ¨¡æµç¨‹\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"é¢†åŸŸå»ºæ¨¡æµç¨‹\"\r\n        Business[ä¸šåŠ¡ç†è§£<br/>Business Understanding]\r\n        Language[é€šç”¨è¯­è¨€<br/>Ubiquitous Language]\r\n        Model[é¢†åŸŸæ¨¡å‹<br/>Domain Model]\r\n        Code[ä»£ç å®ç°<br/>Code Implementation]\r\n        Feedback[åé¦ˆä¼˜åŒ–<br/>Feedback and Refinement]\r\n        \r\n        Business --> Language\r\n        Language --> Model\r\n        Model --> Code\r\n        Code --> Feedback\r\n        Feedback --> Business\r\n    end\r\n    \r\n    style Model fill:#ffebee\r\n```\r\n\r\n**å®æ–½å»ºè®®**ï¼š\r\n1. **ä¸šåŠ¡ä¼˜å…ˆ**ï¼šæ·±å…¥ç†è§£ä¸šåŠ¡é¢†åŸŸ\r\n2. **é€šç”¨è¯­è¨€**ï¼šå»ºç«‹ä¸šåŠ¡å’ŒæŠ€æœ¯ä¹‹é—´çš„é€šç”¨è¯­è¨€\r\n3. **è¿­ä»£å»ºæ¨¡**ï¼šé€šè¿‡è¿­ä»£ä¸æ–­å®Œå–„é¢†åŸŸæ¨¡å‹\r\n4. **ä»£ç éªŒè¯**ï¼šé€šè¿‡ä»£ç å®ç°éªŒè¯æ¨¡å‹\r\n\r\n---\r\n\r\n## ä¸å…¶ä»–æ¶æ„æ¨¡å¼çš„å…³ç³»\r\n\r\n### DDDä¸å…¶ä»–æ¶æ„çš„å…³ç³»\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"æ¶æ„å…³ç³»\"\r\n        DDD[é¢†åŸŸé©±åŠ¨è®¾è®¡]\r\n        Onion[æ´‹è‘±æ¶æ„]\r\n        Clean[Cleanæ¶æ„]\r\n        Hex[å…­è¾¹å½¢æ¶æ„]\r\n        CQRS[CQRS]\r\n        ES[äº‹ä»¶æº¯æº]\r\n        \r\n        DDD --> Onion\r\n        DDD --> Clean\r\n        DDD --> Hex\r\n        DDD --> CQRS\r\n        DDD --> ES\r\n        \r\n        Onion -.ä½“ç°.-> DDD\r\n        Clean -.ä½“ç°.-> DDD\r\n    end\r\n    \r\n    style DDD fill:#ffebee\r\n```\r\n\r\n**å…³ç³»è¯´æ˜**ï¼š\r\n- **æ´‹è‘±æ¶æ„**ï¼šDDDçš„æ¶æ„å®ç°æ–¹å¼ä¹‹ä¸€\r\n- **Cleanæ¶æ„**ï¼šDDDçš„æ¶æ„å®ç°æ–¹å¼ä¹‹ä¸€\r\n- **å…­è¾¹å½¢æ¶æ„**ï¼šDDDçš„æ¶æ„å®ç°æ–¹å¼ä¹‹ä¸€\r\n- **CQRS**ï¼šå¸¸ä¸DDDç»“åˆä½¿ç”¨\r\n- **äº‹ä»¶æº¯æº**ï¼šå¸¸ä¸DDDç»“åˆä½¿ç”¨\r\n\r\n---\r\n\r\n## åº”ç”¨åœºæ™¯\r\n\r\n### é€‚ç”¨åœºæ™¯\r\n\r\n```mermaid\r\nmindmap\r\n  root((DDDé€‚ç”¨åœºæ™¯))\r\n    å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ\r\n      ä¼ä¸šçº§åº”ç”¨\r\n      é‡‘èç³»ç»Ÿ\r\n      ç”µå•†å¹³å°\r\n    ä¸šåŠ¡é€»è¾‘å¤æ‚\r\n      è§„åˆ™å¤æ‚\r\n      æµç¨‹å¤æ‚\r\n      çŠ¶æ€å¤æ‚\r\n    é•¿æœŸç»´æŠ¤é¡¹ç›®\r\n      éœ€è¦æŒç»­æ¼”è¿›\r\n      ä¸šåŠ¡å˜åŒ–é¢‘ç¹\r\n      å›¢é˜Ÿåä½œå¼€å‘\r\n    ä¸šåŠ¡ä»·å€¼é«˜\r\n      æ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿ\r\n      å…³é”®ä¸šåŠ¡æµç¨‹\r\n      é«˜ä»·å€¼åŠŸèƒ½\r\n```\r\n\r\n**å…·ä½“åœºæ™¯**ï¼š\r\n- âœ… **å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ**ï¼šä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œéœ€è¦é¢†åŸŸæ¨¡å‹\r\n- âœ… **ä¼ä¸šçº§åº”ç”¨**ï¼šéœ€è¦é•¿æœŸç»´æŠ¤å’Œæ¼”è¿›\r\n- âœ… **é‡‘èç³»ç»Ÿ**ï¼šä¸šåŠ¡è§„åˆ™å¤æ‚ï¼Œéœ€è¦ä¸¥æ ¼éªŒè¯\r\n- âœ… **ç”µå•†å¹³å°**ï¼šä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œéœ€è¦çµæ´»æ‰©å±•\r\n\r\n### ä¸é€‚ç”¨åœºæ™¯\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"ä¸é€‚ç”¨åœºæ™¯\"\r\n        Simple[ç®€å•CRUD<br/>ä¸šåŠ¡é€»è¾‘ç®€å•]\r\n        Prototype[åŸå‹å¼€å‘<br/>å¿«é€ŸéªŒè¯]\r\n        DataCentric[æ•°æ®ä¸ºä¸­å¿ƒ<br/>ä»¥æ•°æ®å¤„ç†ä¸ºä¸»]\r\n    end\r\n    \r\n    style Simple fill:#ffcccb\r\n```\r\n\r\n**ä¸é€‚ç”¨åœºæ™¯**ï¼š\r\n- âŒ **ç®€å•CRUD**ï¼šä¸šåŠ¡é€»è¾‘ç®€å•ï¼Œä¸éœ€è¦é¢†åŸŸæ¨¡å‹\r\n- âŒ **åŸå‹å¼€å‘**ï¼šå¿«é€ŸéªŒè¯ï¼Œä¸éœ€è¦å®Œæ•´DDD\r\n- âŒ **æ•°æ®ä¸ºä¸­å¿ƒ**ï¼šä»¥æ•°æ®å¤„ç†ä¸ºä¸»ï¼Œä¸šåŠ¡é€»è¾‘ç®€å•\r\n\r\n---\r\n\r\n## å®é™…æ¡ˆä¾‹\r\n\r\n### æ¡ˆä¾‹1ï¼šç”µå•†è®¢å•ç³»ç»Ÿ\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"è®¢å•èšåˆ\"\r\n        OrderRoot[è®¢å•èšåˆæ ¹<br/>Order Aggregate Root]\r\n        OrderItem1[è®¢å•é¡¹1<br/>OrderItem Entity]\r\n        OrderItem2[è®¢å•é¡¹2<br/>OrderItem Entity]\r\n        ShippingAddress[é…é€åœ°å€<br/>Address ValueObject]\r\n        Money[é‡‘é¢<br/>Money ValueObject]\r\n    end\r\n    \r\n    subgraph \"é¢†åŸŸæœåŠ¡\"\r\n        PricingService[å®šä»·æœåŠ¡<br/>PricingDomainService]\r\n        ValidationService[éªŒè¯æœåŠ¡<br/>ValidationDomainService]\r\n    end\r\n    \r\n    subgraph \"é¢†åŸŸäº‹ä»¶\"\r\n        OrderCreated[è®¢å•å·²åˆ›å»º<br/>OrderCreated Event]\r\n        OrderPaid[è®¢å•å·²æ”¯ä»˜<br/>OrderPaid Event]\r\n    end\r\n    \r\n    OrderRoot --> OrderItem1\r\n    OrderRoot --> OrderItem2\r\n    OrderItem1 --> Money\r\n    OrderRoot --> ShippingAddress\r\n    \r\n    PricingService --> OrderRoot\r\n    ValidationService --> OrderRoot\r\n    \r\n    OrderRoot -.è§¦å‘.-> OrderCreated\r\n    OrderRoot -.è§¦å‘.-> OrderPaid\r\n    \r\n    style OrderRoot fill:#ffebee\r\n    style PricingService fill:#fff4e1\r\n```\r\n\r\n### æ¡ˆä¾‹2ï¼šæ¸¸æˆæˆ˜æ–—ç³»ç»Ÿ\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"æˆ˜æ–—èšåˆ\"\r\n        BattleRoot[æˆ˜æ–—èšåˆæ ¹<br/>Battle Aggregate Root]\r\n        Round[å›åˆå®ä½“<br/>Round Entity]\r\n        Team[é˜µè¥å®ä½“<br/>Team Entity]\r\n        Unit[å•ä½å®ä½“<br/>Unit Entity]\r\n        Position[ä½ç½®å€¼å¯¹è±¡<br/>Position ValueObject]\r\n    end\r\n    \r\n    subgraph \"é¢†åŸŸæœåŠ¡\"\r\n        DamageService[ä¼¤å®³è®¡ç®—æœåŠ¡<br/>DamageDomainService]\r\n        TargetService[ç›®æ ‡é€‰æ‹©æœåŠ¡<br/>TargetDomainService]\r\n    end\r\n    \r\n    subgraph \"é¢†åŸŸäº‹ä»¶\"\r\n        UnitActionExecuted[å•ä½è¡ŒåŠ¨å·²æ‰§è¡Œ<br/>UnitActionExecuted Event]\r\n        RoundStarted[å›åˆå·²å¼€å§‹<br/>RoundStarted Event]\r\n    end\r\n    \r\n    BattleRoot --> Round\r\n    Round --> Team\r\n    Team --> Unit\r\n    Unit --> Position\r\n    \r\n    DamageService --> Unit\r\n    TargetService --> Unit\r\n    \r\n    Unit -.è§¦å‘.-> UnitActionExecuted\r\n    Round -.è§¦å‘.-> RoundStarted\r\n    \r\n    style BattleRoot fill:#ffebee\r\n    style DamageService fill:#fff4e1\r\n```\r\n\r\n---\r\n\r\n## è®¾è®¡åŸåˆ™\r\n\r\n### DDDè®¾è®¡åŸåˆ™\r\n\r\n```mermaid\r\ngraph TB\r\n    subgraph \"DDDè®¾è®¡åŸåˆ™\"\r\n        Principle1[é¢†åŸŸæ¨¡å‹åœ¨ä¸­å¿ƒ<br/>Domain Model at Center]\r\n        Principle2[é€šç”¨è¯­è¨€<br/>Ubiquitous Language]\r\n        Principle3[èšåˆè¾¹ç•Œ<br/>Aggregate Boundaries]\r\n        Principle4[é¢†åŸŸäº‹ä»¶<br/>Domain Events]\r\n        Principle5[ä»“å‚¨æŠ½è±¡<br/>Repository Abstraction]\r\n    end\r\n    \r\n    style Principle1 fill:#ffebee\r\n```\r\n\r\n**æ ¸å¿ƒåŸåˆ™**ï¼š\r\n- **é¢†åŸŸæ¨¡å‹åœ¨ä¸­å¿ƒ**ï¼šä¸šåŠ¡é€»è¾‘é€šè¿‡é¢†åŸŸæ¨¡å‹è¡¨è¾¾\r\n- **é€šç”¨è¯­è¨€**ï¼šä¸šåŠ¡å’ŒæŠ€æœ¯ä½¿ç”¨ç›¸åŒçš„è¯­è¨€\r\n- **èšåˆè¾¹ç•Œ**ï¼šé€šè¿‡èšåˆå®šä¹‰ä¸šåŠ¡è¾¹ç•Œ\r\n- **é¢†åŸŸäº‹ä»¶**ï¼šé€šè¿‡äº‹ä»¶å®ç°èšåˆé—´é€šä¿¡\r\n- **ä»“å‚¨æŠ½è±¡**ï¼šé€šè¿‡ä»“å‚¨æŠ½è±¡æ•°æ®è®¿é—®\r\n\r\n---\r\n\r\n## æ€»ç»“\r\n\r\né¢†åŸŸé©±åŠ¨è®¾è®¡æ˜¯ä¸€ç§ä»¥é¢†åŸŸæ¨¡å‹ä¸ºä¸­å¿ƒçš„è½¯ä»¶è®¾è®¡æ–¹æ³•è®ºï¼Œé€šè¿‡é¢†åŸŸæ¨¡å‹è¡¨è¾¾ä¸šåŠ¡é€»è¾‘ï¼Œä½¿ç”¨é€šç”¨è¯­è¨€æ²Ÿé€šä¸šåŠ¡å’ŒæŠ€æœ¯ï¼Œé€šè¿‡èšåˆä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚\r\n\r\n**æ ¸å¿ƒä»·å€¼**ï¼š\r\n- ğŸ¯ **ä¸šåŠ¡ä»·å€¼**ï¼šä»£ç ç›´æ¥åæ˜ ä¸šåŠ¡ï¼Œæ˜“äºç†è§£\r\n- ğŸ’¬ **é€šç”¨è¯­è¨€**ï¼šæ¶ˆé™¤ä¸šåŠ¡å’ŒæŠ€æœ¯ä¹‹é—´çš„æ²Ÿé€šéšœç¢\r\n- ğŸ—ï¸ **é¢†åŸŸæ¨¡å‹**ï¼šé€šè¿‡æ¨¡å‹è¡¨è¾¾å¤æ‚ä¸šåŠ¡é€»è¾‘\r\n- ğŸ”’ **æ•°æ®ä¸€è‡´æ€§**ï¼šé€šè¿‡èšåˆä¿è¯æ•°æ®ä¸€è‡´æ€§\r\n\r\n**é€‚ç”¨åœºæ™¯**ï¼š\r\n- âœ… å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ\r\n- âœ… ä¸šåŠ¡é€»è¾‘å¤æ‚\r\n- âœ… é•¿æœŸç»´æŠ¤é¡¹ç›®\r\n- âœ… ä¸šåŠ¡ä»·å€¼é«˜\r\n\r\n**æ³¨æ„äº‹é¡¹**ï¼š\r\n- âš ï¸ å¤æ‚åº¦è¾ƒé«˜ï¼Œéœ€è¦æ·±å…¥ç†è§£ä¸šåŠ¡\r\n- âš ï¸ å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œéœ€è¦æŒæ¡DDDæ¦‚å¿µ\r\n- âš ï¸ å›¢é˜Ÿè¦æ±‚é«˜ï¼Œéœ€è¦ä¸šåŠ¡å’ŒæŠ€æœ¯åä½œ\r\n\r\né¢†åŸŸé©±åŠ¨è®¾è®¡æ˜¯æ„å»ºå¯ç»´æŠ¤ã€å¯æ‰©å±•ã€é«˜è´¨é‡ç³»ç»Ÿçš„ä¼˜ç§€æ–¹æ³•è®ºï¼Œç‰¹åˆ«é€‚åˆå¤æ‚ä¸šåŠ¡ç³»ç»Ÿå’Œé•¿æœŸç»´æŠ¤çš„é¡¹ç›®ã€‚\r\n\r\n"
        }
    ]
}