{
    "sourceFile": "Assets/UnityEditor/Chapter 8 UnityAPI/UnityEngine/Android/AndroidExample.cs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1750933459547,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1750933459547,
            "name": "Commit-0",
            "content": "using UnityEngine;\r\n\r\n/// <summary>\r\n/// UnityEngine.Android 命名空间案例演示\r\n/// 展示Android平台特定功能、权限管理、设备信息等核心功能\r\n/// </summary>\r\npublic class AndroidExample : MonoBehaviour\r\n{\r\n    [Header(\"Android设备信息\")]\r\n    [SerializeField] private string deviceModel = \"\"; //设备型号\r\n    [SerializeField] private string deviceName = \"\"; //设备名称\r\n    [SerializeField] private string androidVersion = \"\"; //Android版本\r\n    [SerializeField] private int sdkVersion = 0; //SDK版本\r\n    [SerializeField] private string manufacturer = \"\"; //制造商\r\n\r\n    [Header(\"权限管理\")]\r\n    [SerializeField] private bool cameraPermission = false; //相机权限\r\n    [SerializeField] private bool microphonePermission = false; //麦克风权限\r\n    [SerializeField] private bool locationPermission = false; //位置权限\r\n    [SerializeField] private bool storagePermission = false; //存储权限\r\n    [SerializeField] private bool internetPermission = false; //网络权限\r\n\r\n    [Header(\"Android功能\")]\r\n    [SerializeField] private bool enableVibration = true; //启用震动\r\n    [SerializeField] private bool enableKeepAwake = true; //保持唤醒\r\n    [SerializeField] private bool enableImmersiveMode = false; //沉浸模式\r\n    [SerializeField] private bool enableFullscreen = false; //全屏模式\r\n\r\n    [Header(\"Android设置\")]\r\n    [SerializeField] private int targetFrameRate = 60; //目标帧率\r\n    [SerializeField] private bool enableMultithreadedRendering = true; //多线程渲染\r\n    [SerializeField] private bool enableGraphicsJobs = true; //图形作业\r\n\r\n    private void Start()\r\n    {\r\n        InitializeAndroidSystem();\r\n    }\r\n\r\n    /// <summary>\r\n    /// 初始化Android系统\r\n    /// </summary>\r\n    private void InitializeAndroidSystem()\r\n    {\r\n        // 获取设备信息\r\n        GetDeviceInfo();\r\n        \r\n        // 检查权限\r\n        CheckPermissions();\r\n        \r\n        // 设置Android特定功能\r\n        SetupAndroidFeatures();\r\n        \r\n        Debug.Log(\"Android系统初始化完成\");\r\n    }\r\n\r\n    /// <summary>\r\n    /// 获取设备信息\r\n    /// </summary>\r\n    private void GetDeviceInfo()\r\n    {\r\n        deviceModel = SystemInfo.deviceModel;\r\n        deviceName = SystemInfo.deviceName;\r\n        androidVersion = SystemInfo.operatingSystem;\r\n        sdkVersion = GetAndroidSDKVersion();\r\n        manufacturer = GetDeviceManufacturer();\r\n        \r\n        Debug.Log($\"设备信息: {deviceModel} ({manufacturer})\");\r\n        Debug.Log($\"Android版本: {androidVersion}\");\r\n        Debug.Log($\"SDK版本: {sdkVersion}\");\r\n    }\r\n\r\n    /// <summary>\r\n    /// 获取Android SDK版本\r\n    /// </summary>\r\n    /// <returns>SDK版本号</returns>\r\n    private int GetAndroidSDKVersion()\r\n    {\r\n        // 这里应该调用Android API获取SDK版本\r\n        // 由于Unity的限制，这里返回模拟值\r\n        return 30; // Android 11\r\n    }\r\n\r\n    /// <summary>\r\n    /// 获取设备制造商\r\n    /// </summary>\r\n    /// <returns>制造商名称</returns>\r\n    private string GetDeviceManufacturer()\r\n    {\r\n        // 这里应该调用Android API获取制造商信息\r\n        return \"Unknown\";\r\n    }\r\n\r\n    /// <summary>\r\n    /// 检查权限\r\n    /// </summary>\r\n    private void CheckPermissions()\r\n    {\r\n        // 检查各种权限状态\r\n        cameraPermission = CheckPermission(\"android.permission.CAMERA\");\r\n        microphonePermission = CheckPermission(\"android.permission.RECORD_AUDIO\");\r\n        locationPermission = CheckPermission(\"android.permission.ACCESS_FINE_LOCATION\");\r\n        storagePermission = CheckPermission(\"android.permission.WRITE_EXTERNAL_STORAGE\");\r\n        internetPermission = CheckPermission(\"android.permission.INTERNET\");\r\n    }\r\n\r\n    /// <summary>\r\n    /// 检查权限\r\n    /// </summary>\r\n    /// <param name=\"permission\">权限名称</param>\r\n    /// <returns>是否有权限</returns>\r\n    private bool CheckPermission(string permission)\r\n    {\r\n        // 这里应该调用Android API检查权限\r\n        // 由于Unity的限制，这里返回模拟值\r\n        return true;\r\n    }\r\n\r\n    /// <summary>\r\n    /// 设置Android特定功能\r\n    /// </summary>\r\n    private void SetupAndroidFeatures()\r\n    {\r\n        // 设置目标帧率\r\n        Application.targetFrameRate = targetFrameRate;\r\n        \r\n        // 设置多线程渲染\r\n        QualitySettings.multiThreadedRendering = enableMultithreadedRendering;\r\n        \r\n        // 设置图形作业\r\n        QualitySettings.graphicsJobs = enableGraphicsJobs;\r\n        \r\n        // 设置保持唤醒\r\n        if (enableKeepAwake)\r\n        {\r\n            Screen.sleepTimeout = SleepTimeout.NeverSleep;\r\n        }\r\n        else\r\n        {\r\n            Screen.sleepTimeout = SleepTimeout.SystemSetting;\r\n        }\r\n    }\r\n\r\n    /// <summary>\r\n    /// 请求权限\r\n    /// </summary>\r\n    /// <param name=\"permission\">权限名称</param>\r\n    public void RequestPermission(string permission)\r\n    {\r\n        // 这里应该调用Android API请求权限\r\n        Debug.Log($\"请求权限: {permission}\");\r\n        \r\n        // 模拟权限授予\r\n        switch (permission)\r\n        {\r\n            case \"android.permission.CAMERA\":\r\n                cameraPermission = true;\r\n                break;\r\n            case \"android.permission.RECORD_AUDIO\":\r\n                microphonePermission = true;\r\n                break;\r\n            case \"android.permission.ACCESS_FINE_LOCATION\":\r\n                locationPermission = true;\r\n                break;\r\n            case \"android.permission.WRITE_EXTERNAL_STORAGE\":\r\n                storagePermission = true;\r\n                break;\r\n            case \"android.permission.INTERNET\":\r\n                internetPermission = true;\r\n                break;\r\n        }\r\n    }\r\n\r\n    /// <summary>\r\n    /// 启用震动\r\n    /// </summary>\r\n    /// <param name=\"duration\">震动时长（毫秒）</param>\r\n    public void Vibrate(int duration = 100)\r\n    {\r\n        if (enableVibration)\r\n        {\r\n            // 这里应该调用Android震动API\r\n            Debug.Log($\"震动 {duration}ms\");\r\n        }\r\n    }\r\n\r\n    /// <summary>\r\n    /// 设置沉浸模式\r\n    /// </summary>\r\n    /// <param name=\"enabled\">是否启用</param>\r\n    public void SetImmersiveMode(bool enabled)\r\n    {\r\n        enableImmersiveMode = enabled;\r\n        \r\n        if (enabled)\r\n        {\r\n            // 启用沉浸模式\r\n            Debug.Log(\"沉浸模式已启用\");\r\n        }\r\n        else\r\n        {\r\n            // 禁用沉浸模式\r\n            Debug.Log(\"沉浸模式已禁用\");\r\n        }\r\n    }\r\n\r\n    /// <summary>\r\n    /// 设置全屏模式\r\n    /// </summary>\r\n    /// <param name=\"enabled\">是否启用</param>\r\n    public void SetFullscreenMode(bool enabled)\r\n    {\r\n        enableFullscreen = enabled;\r\n        Screen.fullScreen = enabled;\r\n        \r\n        Debug.Log($\"全屏模式: {(enabled ? \"启用\" : \"禁用\")}\");\r\n    }\r\n\r\n    /// <summary>\r\n    /// 获取Android系统信息\r\n    /// </summary>\r\n    public void GetAndroidSystemInfo()\r\n    {\r\n        Debug.Log(\"=== Android系统信息 ===\");\r\n        Debug.Log($\"设备型号: {deviceModel}\");\r\n        Debug.Log($\"设备名称: {deviceName}\");\r\n        Debug.Log($\"制造商: {manufacturer}\");\r\n        Debug.Log($\"Android版本: {androidVersion}\");\r\n        Debug.Log($\"SDK版本: {sdkVersion}\");\r\n        Debug.Log($\"处理器: {SystemInfo.processorType}\");\r\n        Debug.Log($\"内存: {SystemInfo.systemMemorySize}MB\");\r\n        Debug.Log($\"图形设备: {SystemInfo.graphicsDeviceName}\");\r\n        Debug.Log($\"图形内存: {SystemInfo.graphicsMemorySize}MB\");\r\n    }\r\n\r\n    /// <summary>\r\n    /// 获取权限信息\r\n    /// </summary>\r\n    public void GetPermissionInfo()\r\n    {\r\n        Debug.Log(\"=== 权限信息 ===\");\r\n        Debug.Log($\"相机权限: {cameraPermission}\");\r\n        Debug.Log($\"麦克风权限: {microphonePermission}\");\r\n        Debug.Log($\"位置权限: {locationPermission}\");\r\n        Debug.Log($\"存储权限: {storagePermission}\");\r\n        Debug.Log($\"网络权限: {internetPermission}\");\r\n    }\r\n\r\n    /// <summary>\r\n    /// 测试Android功能\r\n    /// </summary>\r\n    public void TestAndroidFeatures()\r\n    {\r\n        Debug.Log(\"开始测试Android功能\");\r\n        \r\n        // 测试震动\r\n        Vibrate(200);\r\n        \r\n        // 测试权限请求\r\n        RequestPermission(\"android.permission.CAMERA\");\r\n        \r\n        // 测试沉浸模式\r\n        SetImmersiveMode(true);\r\n        \r\n        Debug.Log(\"Android功能测试完成\");\r\n    }\r\n\r\n    /// <summary>\r\n    /// 重置Android设置\r\n    /// </summary>\r\n    public void ResetAndroidSettings()\r\n    {\r\n        enableVibration = true;\r\n        enableKeepAwake = true;\r\n        enableImmersiveMode = false;\r\n        enableFullscreen = false;\r\n        targetFrameRate = 60;\r\n        enableMultithreadedRendering = true;\r\n        enableGraphicsJobs = true;\r\n        \r\n        SetupAndroidFeatures();\r\n        Debug.Log(\"Android设置已重置\");\r\n    }\r\n\r\n    private void OnGUI()\r\n    {\r\n        GUILayout.BeginArea(new Rect(10, 10, 400, 700));\r\n        GUILayout.Label(\"Android 平台功能演示\", UnityEditor.EditorStyles.boldLabel);\r\n        \r\n        GUILayout.Space(10);\r\n        GUILayout.Label(\"设备信息:\");\r\n        GUILayout.Label($\"设备: {deviceModel}\");\r\n        GUILayout.Label($\"制造商: {manufacturer}\");\r\n        GUILayout.Label($\"Android版本: {androidVersion}\");\r\n        GUILayout.Label($\"SDK版本: {sdkVersion}\");\r\n        \r\n        GUILayout.Space(10);\r\n        GUILayout.Label(\"权限状态:\");\r\n        GUILayout.Label($\"相机: {(cameraPermission ? \"已授权\" : \"未授权\")}\");\r\n        GUILayout.Label($\"麦克风: {(microphonePermission ? \"已授权\" : \"未授权\")}\");\r\n        GUILayout.Label($\"位置: {(locationPermission ? \"已授权\" : \"未授权\")}\");\r\n        GUILayout.Label($\"存储: {(storagePermission ? \"已授权\" : \"未授权\")}\");\r\n        GUILayout.Label($\"网络: {(internetPermission ? \"已授权\" : \"未授权\")}\");\r\n        \r\n        GUILayout.Space(10);\r\n        GUILayout.Label(\"功能设置:\");\r\n        \r\n        enableVibration = GUILayout.Toggle(enableVibration, \"启用震动\");\r\n        enableKeepAwake = GUILayout.Toggle(enableKeepAwake, \"保持唤醒\");\r\n        enableImmersiveMode = GUILayout.Toggle(enableImmersiveMode, \"沉浸模式\");\r\n        enableFullscreen = GUILayout.Toggle(enableFullscreen, \"全屏模式\");\r\n        \r\n        GUILayout.Space(5);\r\n        targetFrameRate = int.TryParse(GUILayout.TextField(\"目标帧率\", targetFrameRate.ToString()), out var fps) ? fps : targetFrameRate;\r\n        enableMultithreadedRendering = GUILayout.Toggle(enableMultithreadedRendering, \"多线程渲染\");\r\n        enableGraphicsJobs = GUILayout.Toggle(enableGraphicsJobs, \"图形作业\");\r\n        \r\n        GUILayout.Space(10);\r\n        \r\n        if (GUILayout.Button(\"请求相机权限\"))\r\n        {\r\n            RequestPermission(\"android.permission.CAMERA\");\r\n        }\r\n        \r\n        if (GUILayout.Button(\"请求麦克风权限\"))\r\n        {\r\n            RequestPermission(\"android.permission.RECORD_AUDIO\");\r\n        }\r\n        \r\n        if (GUILayout.Button(\"震动测试\"))\r\n        {\r\n            Vibrate(500);\r\n        }\r\n        \r\n        GUILayout.Space(10);\r\n        \r\n        if (GUILayout.Button(\"获取系统信息\"))\r\n        {\r\n            GetAndroidSystemInfo();\r\n        }\r\n        \r\n        if (GUILayout.Button(\"获取权限信息\"))\r\n        {\r\n            GetPermissionInfo();\r\n        }\r\n        \r\n        if (GUILayout.Button(\"测试Android功能\"))\r\n        {\r\n            TestAndroidFeatures();\r\n        }\r\n        \r\n        if (GUILayout.Button(\"重置Android设置\"))\r\n        {\r\n            ResetAndroidSettings();\r\n        }\r\n        \r\n        GUILayout.EndArea();\r\n    }\r\n} "
        }
    ]
}