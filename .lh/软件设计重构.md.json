{
    "sourceFile": "软件设计重构.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1764157654825,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764157667630,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,57 +22,8 @@\n - 增强技术债务意识\r\n - 发现并偿还技术债务\r\n - 防范技术债务积累\r\n \r\n-## 第一章补充：架构思维分类\r\n-\r\n-### 1.6 组成派 vs 决策派\r\n-\r\n-#### 组成派（Compositional）\r\n-- **关注点**：系统由什么组件组成，组件如何组合\r\n-- **思维方式**：\"系统由什么组成\"、\"如何组合\"\r\n-- **典型模式**：MVC、MVP、MVVM（这些模式定义了组件结构）\r\n-- **特点**：关注结构分解和组件职责划分\r\n-\r\n-#### 决策派（Decision-based）\r\n-- **关注点**：架构中的关键决策、约束和权衡\r\n-- **思维方式**：\"为什么这样设计\"、\"做了哪些关键决策\"、\"面临什么约束\"\r\n-- **核心问题**：\r\n-  - 为什么要分离关注点？\r\n-  - 为什么选择这种交互方式？\r\n-  - 面临什么约束（性能、可维护性、团队能力等）？\r\n-  - 做了哪些权衡？\r\n-- **特点**：关注设计理据和决策背后的原因\r\n-\r\n-### 1.7 决策派视角下的 MVC\r\n-\r\n-虽然 MVC 本身是组成派模式（定义了 Model、View、Controller 三个组件），但从**决策派思维**理解时，应关注：\r\n-\r\n-#### 关键决策\r\n-1. **关注点分离决策**\r\n-   - 为什么分离数据、展示和控制？\r\n-   - 理据：提高可维护性、可测试性、可扩展性\r\n-\r\n-2. **交互方式决策**\r\n-   - 为什么 Controller 操作 Model，而不是 View 直接操作？\r\n-   - 理据：避免 View 与业务逻辑耦合，便于复用\r\n-\r\n-3. **数据流向决策**\r\n-   - 为什么 Model 通知 View，而不是 View 轮询 Model？\r\n-   - 理据：解耦、响应式更新、性能考虑\r\n-\r\n-#### 约束与权衡\r\n-- **性能约束**：观察者模式可能带来性能开销\r\n-- **复杂度权衡**：增加 Controller 层增加了复杂度，但提高了可维护性\r\n-- **团队能力约束**：需要团队理解分层思想\r\n-\r\n-#### 决策派思维的应用\r\n-- 不盲目套用 MVC，而是理解其背后的决策\r\n-- 根据项目约束调整架构（如简化版 MVC、MVP 变体）\r\n-- 记录架构决策文档（ADR - Architecture Decision Records）\r\n-\r\n-> **个人思维倾向**：决策派思维 - 关注\"为什么\"而非\"是什么\"\r\n-\r\n ## 第二章：设计坏味\r\n > 谚语：从错误中学到的东西要比成功中学到的东西多\r\n \r\n ### 2.1 坏味的特征\r\n"
                }
            ],
            "date": 1764157654825,
            "name": "Commit-0",
            "content": "# 软件设计重构\r\n\r\n## 第一章：技术债务\r\n### 1.1 技术财务 --> 技术破产\r\n### 1.2 技术债务组成\r\n- 代码债务\r\n- 设计债务\r\n- 测试债务\r\n- 文档债务\r\n\r\n### 1.3 债务影响 Coc (Cost of Change)\r\n- 影响团队士气和积极性  \r\n  例子: 美国骑士资本，因为技术债务导致资产债务极速恶化\r\n\r\n### 1.4 引发债务原因\r\n- 时间紧\r\n- 缺乏优秀人才\r\n- 未遵守设计原理 [设计原理链接](https://blog.csdn.net/u010388497/article/details/51809152?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-2-51809152-blog-123449955.235%5Ev43%5Epc_blog_bottom_relevance_base7&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-2-51809152-blog-123449955.235%5Ev43%5Epc_blog_bottom_relevance_base7&utm_relevant_index=5)\r\n- 不懂设计坏味与重构\r\n\r\n### 1.5 管理技术债务\r\n- 增强技术债务意识\r\n- 发现并偿还技术债务\r\n- 防范技术债务积累\r\n\r\n## 第一章补充：架构思维分类\r\n\r\n### 1.6 组成派 vs 决策派\r\n\r\n#### 组成派（Compositional）\r\n- **关注点**：系统由什么组件组成，组件如何组合\r\n- **思维方式**：\"系统由什么组成\"、\"如何组合\"\r\n- **典型模式**：MVC、MVP、MVVM（这些模式定义了组件结构）\r\n- **特点**：关注结构分解和组件职责划分\r\n\r\n#### 决策派（Decision-based）\r\n- **关注点**：架构中的关键决策、约束和权衡\r\n- **思维方式**：\"为什么这样设计\"、\"做了哪些关键决策\"、\"面临什么约束\"\r\n- **核心问题**：\r\n  - 为什么要分离关注点？\r\n  - 为什么选择这种交互方式？\r\n  - 面临什么约束（性能、可维护性、团队能力等）？\r\n  - 做了哪些权衡？\r\n- **特点**：关注设计理据和决策背后的原因\r\n\r\n### 1.7 决策派视角下的 MVC\r\n\r\n虽然 MVC 本身是组成派模式（定义了 Model、View、Controller 三个组件），但从**决策派思维**理解时，应关注：\r\n\r\n#### 关键决策\r\n1. **关注点分离决策**\r\n   - 为什么分离数据、展示和控制？\r\n   - 理据：提高可维护性、可测试性、可扩展性\r\n\r\n2. **交互方式决策**\r\n   - 为什么 Controller 操作 Model，而不是 View 直接操作？\r\n   - 理据：避免 View 与业务逻辑耦合，便于复用\r\n\r\n3. **数据流向决策**\r\n   - 为什么 Model 通知 View，而不是 View 轮询 Model？\r\n   - 理据：解耦、响应式更新、性能考虑\r\n\r\n#### 约束与权衡\r\n- **性能约束**：观察者模式可能带来性能开销\r\n- **复杂度权衡**：增加 Controller 层增加了复杂度，但提高了可维护性\r\n- **团队能力约束**：需要团队理解分层思想\r\n\r\n#### 决策派思维的应用\r\n- 不盲目套用 MVC，而是理解其背后的决策\r\n- 根据项目约束调整架构（如简化版 MVC、MVP 变体）\r\n- 记录架构决策文档（ADR - Architecture Decision Records）\r\n\r\n> **个人思维倾向**：决策派思维 - 关注\"为什么\"而非\"是什么\"\r\n\r\n## 第二章：设计坏味\r\n> 谚语：从错误中学到的东西要比成功中学到的东西多\r\n\r\n### 2.1 坏味的特征\r\n- 可理解性越来越低\r\n- 可修改性和可重用性越来越低\r\n- 可重用性越来越低\r\n- 可靠性和可测试性越来越糟\r\n\r\n### 六大质量指标\r\n- 可理解性\r\n- 可修改性\r\n- 可拓展性\r\n- 可重用性\r\n- 可测试性\r\n- 可靠性\r\n\r\n### 2.2 导致设计坏味的原因\r\n- 违反设计原则\r\n- 不恰当地使用模式（没有认识到必须平衡的作用力，反设计模式）\r\n- 语言的局限性\r\n- 面向对象的过程思维\r\n- 粘滞性\r\n- 未遵守最佳实践和过程\r\n\r\n### 2.5 基于设计原理的坏味分类\r\n- 抽象\r\n- 封装\r\n- 模块化\r\n- 层次结构\r\n\r\n## 第三章 抽象型坏味\r\n> 抽象的最大原则：以简单而有效的方式进行交流和解决问题\r\n\r\n### 应用抽象原则的实现手法\r\n1. 提供清晰的概念边界和唯一身份\r\n2. 映射域实体：需要建立问题域到解决方案域的词汇映射，即问题域对象需要在解决方案之中使用相应对象的抽象表示它们。\r\n3. 确保内聚性和完整性：抽象必须对其承担的责任提供全面支持，如果只提供方法的一部分，抽象即不内聚也不完整。\r\n4. 赋予单一而重要的职责：确保抽象类的唯一性，如表示图像类中不应该包含提供图像表示格式转化的方法。\r\n5. 避免重复：确保对象在设计中只出现一次。\r\n\r\n### 抽象坏味的七大类型\r\n1. **缺失抽象**（基本类型的偏执，数据泥团）\r\n   ##### 使用一系列数据或编码字符串，而不是创建类和接口\r\n   - 理据：创建概念边界清晰，身份唯一实体\r\n   - 原因：未充分分析，未重构，错误地将重点放在细微的性能改善上\r\n   - 重构建议：扩展超类\r\n   - 影响代码质量指标：不可理解性、可修改性、可扩展性、可靠性\r\n   - 现实考虑：避免过度设计、使用构造函数初始化默认值、验证数据值、以漂亮的格式打印数据值、释放已获取的资源\r\n\r\n2. **命令式抽象**（操作类）\r\n   ##### 该类只封装了行为没有数据 --> 违反抽象原则\r\n   - 理据：面向对象基本原则识别真实世界中的事物，使用抽象表示它们\r\n   - 原因：以过程型思维进行面向对象编程\r\n   - 重构建议：消除该类坏味，将方法移到映射域的抽象中，封装所需数据，提高内聚性\r\n   - 影响代码质量指标：可理解性、可修改性、可扩展性、可重用性、可测试性\r\n\r\n3. **不完整抽象**（类支持行为的不完整，中途半端的操作）\r\n   ##### 抽象未支持互补和相关方法\r\n   - 理据：抽象的实现手法创建内聚而完整的对象\r\n   - 原因：缺乏大局观，未遵守语言和库约定\r\n   - 重构建议：补足互补方法\r\n   - 影响代码质量指标：可理解性、可修改性、可扩展性、可重用性、可靠性\r\n\r\n4. **多方面抽象**（发散性变化，概念化滥用，过大的类）\r\n   ##### 抽象被赋予不止一种职责\r\n   - 理据：类的单一且明确职责\r\n   - 原因：通用抽象、演讲过程中未定期重构、麻烦的流程、混合关注点\r\n   - 重构建议：提取类以重构该逻辑族\r\n   - 影响代码质量指标：可理解性、可修改性、可扩展性、可重用性、可靠性、可测试性\r\n\r\n5. **不需要抽象**（不相干的类，冗余类）\r\n   ##### 引入实际上不需要的抽象\r\n   - 理据：类的单一且明确职责\r\n   - 原因：使用面向对象语言，思维却是过程型编程思维、贪图方便使用不合适的语言功能、过度设计\r\n   - 重构建议：将类内联化，合并到其他类；如果只是为了存储常量，考虑转化为枚举\r\n   - 影响代码质量指标：可理解性、可重用性\r\n\r\n6. **未用的抽象**\r\n   ##### 没用的具体类\r\n\r\n7. **重复抽象**\r\n\r\n## 第四章 封装坏味\r\n> 例子：开汽车是否需要理解发动机原理，或者防抱死系统 ABS。封装原则倡导隐藏抽象的实现细节，关注点分离和信息隐藏。\r\n\r\n### 1. 不充分封装\r\n- 对于抽象的一个或多个成员，声明的访问权限比实际需要的大。\r\n\t-\r\n"
        }
    ]
}